[{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Running multiple analyses at once using the CohortMethod package","text":"vignette focus running several different analyses several target-comparator-(nesting)- outcome combinations. can useful want explore sensitivity analyses choices, include controls, run experiment similar OMOP experiment empirically identify optimal analysis choices particular research question. vignette assumes already familiar CohortMethod package able perform single studies. walk steps needed perform exemplar set analyses, selected well-studied topic effect coxibs versus non-selective nonsteroidal anti-inflammatory drugs (NSAIDs) gastrointestinal (GI) bleeding-related hospitalization. simplicity, focus one coxib – celecoxib – one non-selective NSAID – diclofenac. execute various variations analysis primary outcome large set negative control outcomes.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"general-approach","dir":"Articles","previous_headings":"","what":"General approach","title":"Running multiple analyses at once using the CohortMethod package","text":"general approach running set analyses specify function arguments functions normally call, create sets function arguments. final outcome models well intermediate data objects saved disk later extraction. analysis executed calling functions sequence: getDbCohortMethodData() createStudyPopulation() createPs() (optional) trimByPs() (optional) matchOnPs() stratifyByPs() (optional) computeCovariateBalance() (optional) fitOutcomeModel() (optional) provide several analyses CohortMethod package, determine whether analyses anything common, take advantage fact. example, specify several analyses differ way outcome model fitted, CohortMethod extract data fit propensity model , re-use analyses. function arguments need define divided four groups: Hypothesis interest: arguments specific hypothesis interest, case cohort method combination target, comparator, nesting cohort (optional) outcome. Analyses: arguments directly specific hypothesis interest, washout window, whether include drugs covariates, etc. Arguments output previous function CohortMethod package, cohortMethodData argument createPs function. specified user. Arguments specific environment, connection details connecting server, name schema holding CDM data. two arguments (excludedCovariateConceptIds, includedCovariateConceptIds covariateSettings argument getDbCohortMethodData()) can argued part group 1 2. arguments therefore present groups, executing analysis union two lists concept IDs used.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"preparation-for-the-example","dir":"Articles","previous_headings":"","what":"Preparation for the example","title":"Running multiple analyses at once using the CohortMethod package","text":"need tell R connect server data . CohortMethod uses DatabaseConnector package, provides createConnectionDetails function. Type ?createConnectionDetails specific settings required various database management systems (DBMS). example, one might connect PostgreSQL database using code: last lines define cdmDatabaseSchema, cohortDatabaseSchema, cohortTable variables. ’ll use later tell R data CDM format live, want write intermediate tables. Note Microsoft SQL Server, databaseschemas need specify database schema, example cdmDatabaseSchema <- \"my_cdm_data.dbo\". database platforms support temp tables, Oracle, also necessary provide schema user write access can used emulate temp tables. PostgreSQL supports temp tables, can set options(sqlRenderTempEmulationSchema = NULL) (set sqlRenderTempEmulationSchema .)","code":"connectionDetails <- createConnectionDetails(dbms = \"postgresql\",                                              server = \"localhost/ohdsi\",                                              user = \"joe\",                                              password = \"supersecret\")  cdmDatabaseSchema <- \"my_cdm_data\" cohortDatabaseSchema <- \"my_results\" cohortTable <- \"my_cohorts\" options(sqlRenderTempEmulationSchema = NULL)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"preparing-the-exposures-and-outcomes","dir":"Articles","previous_headings":"Preparation for the example","what":"Preparing the exposures and outcome(s)","title":"Running multiple analyses at once using the CohortMethod package","text":"need define exposures outcomes study. , define exposures using OHDSI Capr package. define two exposure cohorts, one celecoxib one diclofenac. often good idea restrict analysis specific indication, maximize comparability two cohorts. case, restrict osteoarthritis knee. create cohort indication, starting first ever diagnosis, ending observation period end. ’ll pull outcome definition OHDSI PhenotypeLibrary: addition outcome interest, also want include large set negative control outcomes. simplicity define negative control concept descendants: combine exposure, indication outcome cohort definitions, use CohortGenerator generate cohorts: went well, now table cohorts interest. can see many entries per cohort:","code":"library(Capr)  celecoxibConceptId <- 1118084 diclofenacConceptId <- 1124300 osteoArthritisOfKneeConceptId <- 4079750  celecoxib <- cs(   descendants(celecoxibConceptId),   name = \"Celecoxib\" )  celecoxibCohort <- cohort(   entry = entry(     drugExposure(celecoxib)   ),   exit = exit(endStrategy = drugExit(celecoxib,                                      persistenceWindow = 30,                                      surveillanceWindow = 0)) )  diclofenac  <- cs(   descendants(diclofenacConceptId),   name = \"Diclofenac\" )  diclofenacCohort <- cohort(   entry = entry(     drugExposure(diclofenac)   ),   exit = exit(endStrategy = drugExit(diclofenac,                                      persistenceWindow = 30,                                      surveillanceWindow = 0)) )  osteoArthritisOfKnee <- cs(   descendants(osteoArthritisOfKneeConceptId),   name = \"Osteoarthritis of knee\" )  osteoArthritisOfKneeCohort <- cohort(   entry = entry(     conditionOccurrence(osteoArthritisOfKnee, firstOccurrence())   ),   exit = exit(     endStrategy = observationExit()   ) ) # Note: this will automatically assign cohort IDs 1,2, and 3, respectively: exposuresAndIndicationCohorts <- makeCohortSet(celecoxibCohort,                                                 diclofenacCohort,                                                 osteoArthritisOfKneeCohort) library(PhenotypeLibrary) outcomeCohorts <- getPlCohortDefinitionSet(77) # GI bleed negativeControlIds <- c(29735, 140673, 197494,                         198185, 198199, 200528, 257315,                         314658, 317376, 321319, 380731,                         432661, 432867, 433516, 433701,                         433753, 435140, 435459, 435524,                         435783, 436665, 436676, 442619,                         444252, 444429, 4131756, 4134120,                         4134454, 4152280, 4165112, 4174262,                         4182210, 4270490, 4286201, 4289933) negativeControlCohorts <- tibble(   cohortId = negativeControlIds,   cohortName = sprintf(\"Negative control %d\", negativeControlIds),   outcomeConceptId = negativeControlIds ) library(CohortGenerator) allCohorts <- bind_rows(outcomeCohorts,                         exposuresAndIndicationCohorts) cohortTableNames <- getCohortTableNames(cohortTable = cohortTable) createCohortTables(connectionDetails = connectionDetails,                    cohortDatabaseSchema = cohortDatabaseSchema,                    cohortTableNames = cohortTableNames) generateCohortSet(connectionDetails = connectionDetails,                   cdmDatabaseSchema = cdmDatabaseSchema,                   cohortDatabaseSchema = cohortDatabaseSchema,                   cohortTableNames = cohortTableNames,                   cohortDefinitionSet = allCohorts) generateNegativeControlOutcomeCohorts(connectionDetails = connectionDetails,                                       cdmDatabaseSchema = cdmDatabaseSchema,                                       cohortDatabaseSchema = cohortDatabaseSchema,                                       cohortTableNames  = cohortTableNames,                                       negativeControlOutcomeCohortSet = negativeControlCohorts) connection <- DatabaseConnector::connect(connectionDetails) sql <- \"SELECT cohort_definition_id, COUNT(*) AS count FROM @cohortDatabaseSchema.@cohortTable GROUP BY cohort_definition_id\" DatabaseConnector::renderTranslateQuerySql(   connection = connection,   sql = sql,   cohortDatabaseSchema = cohortDatabaseSchema,   cohortTable = cohortTable   ) DatabaseConnector::disconnect(connection) ##    cohort_definition_id    count ## 1                433701    90997 ## 2                435783   178528 ## 3                380731   106693 ## 4               4134120    51817 ## 5                433516   236503 ## 6                197494   114327 ## 7                432867 37075900 ## 8                436665   717207 ## 9                432661      990 ## 10               436676   431672 ## 11              4152280  2125215 ## 12               257315   982236 ## 13               200528   979211 ## 14               444429   170621 ## 15               433753   496482 ## 16               435524   356849 ## 17               442619     1036 ## 18              4134454    17972 ## 19               435459   155207 ## 20               317376    74848 ## 21               314658  3305406 ## 22                29735   324877 ## 23               198199   215692 ## 24              4182210  4430749 ## 25              4174262  1332706 ## 26              4286201   216303 ## 27               140673  8957971 ## 28                    2   993116 ## 29                    1   917230 ## 30               321319  1337722 ## 31                   77  1123643 ## 32                    3  1791695"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"specifying-hypotheses-of-interest","dir":"Articles","previous_headings":"","what":"Specifying hypotheses of interest","title":"Running multiple analyses at once using the CohortMethod package","text":"first group arguments define target, comparator, nesting(optional), outcome. demonstrate create one set, add set list: first define outcome interest (GI-bleed, cohort ID 77), explicitly stating outcome interest (outcomeOfInterest = TRUE), meaning want full set artifacts generated outcome. create set negative control outcomes. specify outcomeOfInterest = FALSE, many artifacts saved (like matched population), even generated (like covariate balance). can save lot compute time disk space. also provide true effect size controls, used later empirical calibration. set target celecoxib (cohort ID 1), comparator diclofenac (cohort ID 2), nesting cohort osteoarthritis knee (cohort ID 3). convenient way save targetComparatorOutcomesList file using saveTargetComparatorOutcomesList function, can load using loadTargetComparatorOutcomesList function.","code":"outcomeOfInterest <- createOutcome(outcomeId = 77,                                    outcomeOfInterest = TRUE) negativeControlOutcomes <- lapply(   negativeControlIds,   function(outcomeId) createOutcome(outcomeId = outcomeId,                                     outcomeOfInterest = FALSE,                                     trueEffectSize = 1) ) tcos <- createTargetComparatorOutcomes(   targetId = 1,   comparatorId = 2,   nestingCohortId = 3,   outcomes = append(list(outcomeOfInterest),                     negativeControlOutcomes),   excludedCovariateConceptIds = c(1118084, 1124300) ) targetComparatorOutcomesList <- list(tcos)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"specifying-analyses","dir":"Articles","previous_headings":"","what":"Specifying analyses","title":"Running multiple analyses at once using the CohortMethod package","text":"second group arguments specific hypothesis interest, comprise majority arguments. can recognize arguments created separate ‘create…Args’ function. example, gtDbCohortMethodData() function createGetDbCohortMethodDataArgs() function. settings functions can used create arguments used execution: Note , calling createDefaultCovariateSettings(), specify covariates exclude. running analysis, CohortMethod automatically add excludedCovariateConceptIds specified earlier calling createTargetComparatorOutcomes(). allows analyses settings used multiple TCOs. argument explicitly specified user assume default value specified function. can now combine arguments various functions single analysis: Note assigned analysis ID (1) set arguments. can use later link results back specific set choices. also include short description analysis. can easily create analyses, example using matching, stratification, inverse probability treatment weighting, using sophisticated outcome models: analyses can combined list: convenient way save cmAnalysisList file using saveCmAnalysisList function, can load using loadCmAnalysisList function.","code":"covarSettings <- createDefaultCovariateSettings(   addDescendantsToExclude = TRUE )  getDbCmDataArgs <- createGetDbCohortMethodDataArgs(   removeDuplicateSubjects = \"keep first, truncate to second\",   firstExposureOnly = TRUE,   washoutPeriod = 183,   restrictToCommonPeriod = TRUE,   covariateSettings = covarSettings )  createStudyPopArgs <- createCreateStudyPopulationArgs(   removeSubjectsWithPriorOutcome = TRUE,   minDaysAtRisk = 1,   riskWindowStart = 0,   startAnchor = \"cohort start\",   riskWindowEnd = 30,   endAnchor = \"cohort end\" )  fitOutcomeModelArgs1 <- createFitOutcomeModelArgs(   modelType = \"cox\" ) cmAnalysis1 <- createCmAnalysis(   analysisId = 1,   description = \"No matching, simple outcome model\",   getDbCohortMethodDataArgs = getDbCmDataArgs,   createStudyPopulationArgs = createStudyPopArgs,   fitOutcomeModelArgs = fitOutcomeModelArgs1 ) createPsArgs <- createCreatePsArgs() # Use default settings only  matchOnPsArgs <- createMatchOnPsArgs(   maxRatio = 100 )  computeSharedCovBalArgs <- createComputeCovariateBalanceArgs()  computeCovBalArgs <- createComputeCovariateBalanceArgs(   covariateFilter = CohortMethod::getDefaultCmTable1Specifications() )  fitOutcomeModelArgs2 <- createFitOutcomeModelArgs(   modelType = \"cox\",   stratified = TRUE )  cmAnalysis2 <- createCmAnalysis(   analysisId = 2,   description = \"Matching\",   getDbCohortMethodDataArgs = getDbCmDataArgs,   createStudyPopulationArgs = createStudyPopArgs,   createPsArgs = createPsArgs,   matchOnPsArgs = matchOnPsArgs,   computeSharedCovariateBalanceArgs = computeSharedCovBalArgs,   computeCovariateBalanceArgs = computeCovBalArgs,   fitOutcomeModelArgs = fitOutcomeModelArgs2 )  stratifyByPsArgs <- createStratifyByPsArgs(   numberOfStrata = 10 )  cmAnalysis3 <- createCmAnalysis(   analysisId = 3,   description = \"Stratification\",   getDbCohortMethodDataArgs = getDbCmDataArgs,   createStudyPopulationArgs = createStudyPopArgs,   createPsArgs = createPsArgs,   stratifyByPsArgs = stratifyByPsArgs,   computeSharedCovariateBalanceArgs = computeSharedCovBalArgs,   computeCovariateBalanceArgs = computeCovBalArgs,   fitOutcomeModelArgs = fitOutcomeModelArgs2 )  truncateIptwArgs <- createTruncateIptwArgs(   maxWeight = 10 )  fitOutcomeModelArgs3 <- createFitOutcomeModelArgs(   modelType = \"cox\",   inversePtWeighting = TRUE,   bootstrapCi = TRUE )  cmAnalysis4 <- createCmAnalysis(   analysisId = 4,   description = \"Inverse probability weighting\",   getDbCohortMethodDataArgs = getDbCmDataArgs,   createStudyPopulationArgs = createStudyPopArgs,   createPsArgs = createPsArgs,   truncateIptwArgs = truncateIptwArgs,   computeSharedCovariateBalanceArgs = computeSharedCovBalArgs,   computeCovariateBalanceArgs = computeCovBalArgs,   fitOutcomeModelArgs = fitOutcomeModelArgs3 )  fitOutcomeModelArgs4 <- createFitOutcomeModelArgs(   useCovariates = TRUE,   modelType = \"cox\",   stratified = TRUE )  cmAnalysis5 <- createCmAnalysis(   analysisId = 5,   description = \"Matching plus full outcome model\",   getDbCohortMethodDataArgs = getDbCmDataArgs,   createStudyPopulationArgs = createStudyPopArgs,   createPsArgs = createPsArgs,   matchOnPsArgs = matchOnPsArgs,   computeSharedCovariateBalanceArgs = computeSharedCovBalArgs,   computeCovariateBalanceArgs = computeCovBalArgs,   fitOutcomeModelArgs = fitOutcomeModelArgs4 )  interactionCovariateIds <- c(8532001, 201826210, 21600960413) # Female, T2DM, concurent use of antithrombotic agents  fitOutcomeModelArgs5 <- createFitOutcomeModelArgs(   modelType = \"cox\",   stratified = TRUE,   interactionCovariateIds = interactionCovariateIds )  cmAnalysis6 <- createCmAnalysis(   analysisId = 6,   description = \"Stratification plus interaction terms\",   getDbCohortMethodDataArgs = getDbCmDataArgs,   createStudyPopulationArgs = createStudyPopArgs,   createPsArgs = createPsArgs,   stratifyByPsArgs = stratifyByPsArgs,   computeSharedCovariateBalanceArgs = computeSharedCovBalArgs,   computeCovariateBalanceArgs = computeCovBalArgs,   fitOutcomeModelArgs = fitOutcomeModelArgs5 ) cmAnalysisList <- list(cmAnalysis1,                         cmAnalysis2,                         cmAnalysis3,                         cmAnalysis4,                         cmAnalysis5,                         cmAnalysis6)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"covariate-balance","dir":"Articles","previous_headings":"Specifying analyses","what":"Covariate balance","title":"Running multiple analyses at once using the CohortMethod package","text":"code, specified covariate balance must computed analysis. computational reasons, covariate balance split two: can compute covariate balance target-comparator-outcome-analysis combination, can compute covariate balance target-comparator-analysis, across outcomes. latter referred ‘shared covariate balance’. Since can many outcomes, often feasible recompute (store) balance covariates outcome. Moreover, differences study populations various outcomes likely small; differences arise removing outcome prior, exclude different people study population depending outcome. therefore typically compute balance covariates across outcomes (shared balance), small subset covariates outcome. code , use covariates shared balance computation, typically use evaluate whether analysis achieved covariate balance. limit covariates per-outcome balance computations used standard ‘table 1’ definition used getDefaultCmTable1Specifications() function, can use create ‘table 1’ outcome.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"executing-multiple-analyses","dir":"Articles","previous_headings":"","what":"Executing multiple analyses","title":"Running multiple analyses at once using the CohortMethod package","text":"can now run analyses hypotheses interest using runCmAnalyses() function. function run specified analyses hypotheses interest, meaning total number outcome models length(cmAnalysisList) * length(targetComparatorOutcomesList) (analyses specify outcome model fitted). Note want combinations analyses hypothesis computed, can can skip certain analyses using analysesToExclude argument runCmAnalyses(). code , first specify many parallel threads CohortMethod can use. Many computations can computed parallel, providing one CPU core can greatly speed computation. specify CohortMethod can use CPU cores detected system (using parallel::detectCores() function). call runCmAnalyses(), providing arguments connecting database, schemas tables use, well analyses hypotheses interest. folder specifies outcome models intermediate files written.","code":"multiThreadingSettings <- createDefaultMultiThreadingSettings(parallel::detectCores())  result <- runCmAnalyses(   connectionDetails = connectionDetails,   cdmDatabaseSchema = cdmDatabaseSchema,   exposureDatabaseSchema = cohortDatabaseSchema,   exposureTable = cohortTable,   outcomeDatabaseSchema = cohortDatabaseSchema,   outcomeTable = cohortTable,   nestingCohortDatabaseSchema = cohortDatabaseSchema,   nestingCohortTable = cohortTable,   outputFolder = folder,   multiThreadingSettings = multiThreadingSettings,   cmAnalysesSpecifications = createCmAnalysesSpecifications(     cmAnalysisList = cmAnalysisList,     targetComparatorOutcomesList = targetComparatorOutcomesList   ) )"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"restarting","dir":"Articles","previous_headings":"Executing multiple analyses","what":"Restarting","title":"Running multiple analyses at once using the CohortMethod package","text":"reason execution interrupted, can restart re-issuing runCmAnalyses() command. intermediate final products already completed written disk skipped.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"retrieving-the-results","dir":"Articles","previous_headings":"","what":"Retrieving the results","title":"Running multiple analyses at once using the CohortMethod package","text":"result runCmAnalyses() data frame one row per target-target-outcome-analysis combination. provides file names intermediate end-result files constructed. example, can retrieve plot propensity scores combination target, comparator, outcome interest, last analysis:  Note file names appear several times table. example, analysis 3 5 differ terms outcome model, share propensity score stratification files. can always retrieve file reference table using getFileReference() function: can get summary results using getResultsSummary(): tells us, per target-comparator-outcome-analysis combination, estimated relative risk 95% confidence interval, well number people treated comparator group (trimming matching applicable), number outcomes observed groups within specified risk windows.","code":"psFile <- result |>   filter(targetId == 1,          comparatorId == 2,          outcomeId == 77,          analysisId == 5) |>   pull(psFile) ps <- readRDS(file.path(folder, psFile)) plotPs(ps) result <- getFileReference(folder) resultsSum <- getResultsSummary(folder) resultsSum ## # A tibble: 216 × 27 ##    analysisId targetId comparatorId nestingCohortId outcomeId targetSubjects ##         <int>    <int>        <int>           <int>     <int>          <int> ##  1          1        1            2               3        77          86201 ##  2          1        1            2               3     29735          88336 ##  3          1        1            2               3    140673          83134 ##  4          1        1            2               3    197494          89155 ##  5          1        1            2               3    198185          89318 ##  6          1        1            2               3    198199          88806 ##  7          1        1            2               3    200528          88682 ##  8          1        1            2               3    257315          88328 ##  9          1        1            2               3    314658          79863 ## 10          1        1            2               3    317376          89190 ## # ℹ 206 more rows ## # ℹ 21 more variables: comparatorSubjects <int>, targetDays <dbl>, ## #   comparatorDays <dbl>, targetOutcomes <dbl>, comparatorOutcomes <dbl>, ## #   rr <dbl>, ci95Lb <dbl>, ci95Ub <dbl>, p <dbl>, oneSidedP <dbl>, ## #   logRr <dbl>, seLogRr <dbl>, llr <dbl>, calibratedRr <dbl>, ## #   calibratedCi95Lb <dbl>, calibratedCi95Ub <dbl>, calibratedP <dbl>, ## #   calibratedOneSidedP <dbl>, calibratedLogRr <dbl>, …"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"diagnostics","dir":"Articles","previous_headings":"Retrieving the results","what":"Diagnostics","title":"Running multiple analyses at once using the CohortMethod package","text":"CohorMethod automatically executed set diagnostics target-comparator-(nesting)-outcome: Equipoise: Pass equipoise greater 0.2, meaning two cohorts sufficiently comparable even PS adjustment. Balance: Pass absolute standardized difference means covariates smaller 0.1. compute balance shared balance (across outcomes), per-outcome balance (often contains small subset covariates), pass pass . Generalizability: Pass standardized difference means comparing analytic cohorts (e.g. PS matching) original cohorts smaller threshold covariates. currently don’t set threshold diagnostic, believe even less generalizable findings can still meaningful. Systematic error: Pass expected absolute systematic error (EASE) smaller 0.25. EASE computed first fitting normal distribution negative control estimates, integrating absolute value distribution. EASE equals 0, variation negative control estimates can explained random error (expressed confidence intervals) alone. Higher EASE scores indicate systematic error. Power: Pass minimum detectable relative risk smaller 10; show estimates extremely low power many people trouble interpreting wide confidence intervals. Underpowered estimates still contribute calibration, running across multiple databases, meta-analysis. diagnostics rely threshold can specified using createCmDiagnosticThresholds(), can used createCmAnalysesSpecifications() invoking runCmAnalyses(). Note moving balance diagnostic based significance testing avoid failing balance diagnostics smaller data sets. Currently default still use traditional balance approach. can retrieve diagnostics: ‘unblind’ column tells us whether passed diagnostics. can see many TCOs pass diagnostics per analyses: see pass diagnostics many outcomes (including negative controls) analyses using matching, fail others. can drill diagnostics (case fail don’t achieve covariate balance).","code":"diagnostics <- getDiagnosticsSummary(folder) diagnostics ## # A tibble: 216 × 21 ##    analysisId targetId comparatorId nestingCohortId outcomeId maxSdm ##         <int>    <int>        <int>           <int>     <int>  <dbl> ##  1          1        1            2               3        77     NA ##  2          1        1            2               3     29735     NA ##  3          1        1            2               3    140673     NA ##  4          1        1            2               3    197494     NA ##  5          1        1            2               3    198185     NA ##  6          1        1            2               3    198199     NA ##  7          1        1            2               3    200528     NA ##  8          1        1            2               3    257315     NA ##  9          1        1            2               3    314658     NA ## 10          1        1            2               3    317376     NA ## # ℹ 206 more rows ## # ℹ 15 more variables: sdmFamilyWiseMinP <dbl>, balanceDiagnostic <chr>, ## #   sharedMaxSdm <dbl>, sharedSdmFamilyWiseMinP <dbl>, ## #   sharedBalanceDiagnostic <chr>, equipoise <dbl>, equipoiseDiagnostic <chr>, ## #   generalizabilityMaxSdm <dbl>, generalizabilityDiagnostic <chr>, mdrr <dbl>, ## #   mdrrDiagnostic <chr>, ease <dbl>, easeDiagnostic <chr>, ## #   unblindForEvidenceSynthesis <lgl>, unblind <lgl> diagnostics |>   group_by(analysisId) |>   summarise(passing = sum(unblind)) ## # A tibble: 6 × 2 ##   analysisId passing ##        <int>   <int> ## 1          1       0 ## 2          2      27 ## 3          3       0 ## 4          4       0 ## 5          5      27 ## 6          6       0"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"empirical-calibration-and-negative-control-distribution","dir":"Articles","previous_headings":"Retrieving the results","what":"Empirical calibration and negative control distribution","title":"Running multiple analyses at once using the CohortMethod package","text":"study included negative control outcomes, analysis summary also contains calibrated confidence intervals p-values. can also create calibration effect plots every analysis ID. plot, blue dots represent negative control outcomes, yellow diamond represents health outcome interest: GI bleed. unbiased, well-calibrated analysis 95% negative controls dashed lines (ie. 95% p > .05).      Analysis 6 explored interactions certain variables. estimates interaction terms stored separate results summary. can examine whether estimates also consistent null. example consider interaction ‘concurrent use antithrombotic agents’ (covariate ID 21600960413):","code":"install.packages(\"EmpiricalCalibration\") library(EmpiricalCalibration)  # Analysis 1: No matching, simple outcome model ncs <- resultsSum |>   filter(analysisId == 1,          outcomeId != 77) hoi <- resultsSum |>   filter(analysisId == 1,          outcomeId == 77) null <- fitNull(ncs$logRr, ncs$seLogRr) plotCalibrationEffect(logRrNegatives = ncs$logRr,                        seLogRrNegatives = ncs$seLogRr,                        logRrPositives = hoi$logRr,                        seLogRrPositives = hoi$seLogRr, null) # Analysis 2: Matching ncs <- resultsSum |>   filter(analysisId == 2,          outcomeId != 77) hoi <- resultsSum |>   filter(analysisId == 2,          outcomeId == 77) null <- fitNull(ncs$logRr, ncs$seLogRr) plotCalibrationEffect(logRrNegatives = ncs$logRr,                        seLogRrNegatives = ncs$seLogRr,                        logRrPositives = hoi$logRr,                        seLogRrPositives = hoi$seLogRr, null) # Analysis 3: Stratification ncs <- resultsSum |>   filter(analysisId == 3,          outcomeId != 77) hoi <- resultsSum |>   filter(analysisId == 3,          outcomeId == 77) null <- fitNull(ncs$logRr, ncs$seLogRr) plotCalibrationEffect(logRrNegatives = ncs$logRr,                        seLogRrNegatives = ncs$seLogRr,                        logRrPositives = hoi$logRr,                        seLogRrPositives = hoi$seLogRr, null) # Analysis 4: Inverse probability of treatment weighting ncs <- resultsSum |>   filter(analysisId == 4,          outcomeId != 77) hoi <- resultsSum |>   filter(analysisId == 4,          outcomeId == 77) null <- fitNull(ncs$logRr, ncs$seLogRr) plotCalibrationEffect(logRrNegatives = ncs$logRr,                        seLogRrNegatives = ncs$seLogRr,                        logRrPositives = hoi$logRr,                        seLogRrPositives = hoi$seLogRr, null) # Analysis 5: Stratification plus full outcome model ncs <- resultsSum |>   filter(analysisId == 5,          outcomeId != 77) hoi <- resultsSum |>   filter(analysisId == 5,          outcomeId == 77) null <- fitNull(ncs$logRr, ncs$seLogRr) plotCalibrationEffect(logRrNegatives = ncs$logRr,                        seLogRrNegatives = ncs$seLogRr,                        logRrPositives = hoi$logRr,                        seLogRrPositives = hoi$seLogRr, null) interactionResultsSum <- getInteractionResultsSummary(folder)  # Analysis 6: Stratification plus interaction terms ncs <- interactionResultsSum |>   filter(analysisId == 6,          interactionCovariateId == 21600960413,          outcomeId != 77) hoi <- interactionResultsSum |>   filter(analysisId == 6,          interactionCovariateId == 21600960413,          outcomeId == 77) null <- fitNull(ncs$logRr, ncs$seLogRr) plotCalibrationEffect(logRrNegatives = ncs$logRr,                        seLogRrNegatives = ncs$seLogRr,                        logRrPositives = hoi$logRr,                        seLogRrPositives = hoi$seLogRr, null) ## Warning in fitNull(ncs$logRr, ncs$seLogRr): Estimate(s) with extreme logRr ## detected: abs(logRr) > log(100). Removing before fitting null distribution ## Warning in checkWithinLimits(yLimits, c(seLogRrNegatives, seLogRrPositives), : ## Values are outside plotted range. Consider adjusting yLimits parameter ## Warning in checkWithinLimits(log(xLimits), c(logRrNegatives, logRrPositives), : ## Values are outside plotted range. Consider adjusting xLimits parameter ## Warning: Removed 1 row containing missing values or values outside the scale range ## (`geom_vline()`). ## Warning: Removed 1 row containing missing values or values outside the scale range ## (`geom_point()`)."},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"exporting-to-csv","dir":"Articles","previous_headings":"","what":"Exporting to CSV","title":"Running multiple analyses at once using the CohortMethod package","text":"results generated far reside binary object local file system, mixing aggregate statistics hazard ratios patient-level data including propensity scores per person. share results others, possibly outside organization? exportToCsv() function comes . function exports results, including diagnostics CSV (comma-separated values) files. files contain aggregate statistics, patient-level data. format CSV files enable human review. person counts results smaller minCellCount argument blinded, replacing count negative minCellCount. example, number people outcome 3, minCellCount = 5, count reported -5, Shiny app displayed ‘<5’. Information data model used generate CSV files can retrieved using getResultsDataModelSpecifications():","code":"exportToCsv(   folder,   exportFolder = file.path(folder, \"export\"),   databaseId = \"My CDM\",   minCellCount = 5,   maxCores = parallel::detectCores() ) getResultsDataModelSpecifications() ## # A tibble: 183 × 8 ##    tableName   columnName dataType isRequired primaryKey minCellCount deprecated ##    <chr>       <chr>      <chr>    <chr>      <chr>      <chr>        <chr>      ##  1 cm_attriti… sequence_… int      Yes        Yes        No           No         ##  2 cm_attriti… descripti… varchar  Yes        No         No           No         ##  3 cm_attriti… subjects   int      Yes        No         Yes          No         ##  4 cm_attriti… exposure_… bigint   Yes        Yes        No           No         ##  5 cm_attriti… target_co… bigint   Yes        Yes        No           No         ##  6 cm_attriti… analysis_… int      Yes        Yes        No           No         ##  7 cm_attriti… outcome_id bigint   Yes        Yes        No           No         ##  8 cm_attriti… database_… varchar  Yes        Yes        No           No         ##  9 cm_follow_… target_co… bigint   Yes        Yes        No           No         ## 10 cm_follow_… outcome_id bigint   Yes        Yes        No           No         ## # ℹ 173 more rows ## # ℹ 1 more variable: description <chr>"},{"path":"https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html","id":"acknowledgments","dir":"Articles","previous_headings":"","what":"Acknowledgments","title":"Running multiple analyses at once using the CohortMethod package","text":"Considerable work dedicated provide CohortMethod package. , CohortMethod makes extensive use Cyclops package. work supported part National Science Foundation grant IIS 1251151.","code":"citation(\"CohortMethod\") ## To cite CohortMethod in publications use: ##  ##   Schuemie MJ, Reps JM, Black A, DeFalco F, Evans L, Fridgeirsson E, ##   Gilbert JP, Knoll C, Lavallee M, Rao G, Rijnbeek P, Sadowski K, Sena ##   A, Swerdel J, Williams RD, Suchard MA (2024). \"Health-analytics data ##   to evidence suite (HADES): open-source software for observational ##   research.\" _Studies in Health Technology and Informatics_, *310*, ##   966-970. doi:10.3233/SHTI231108 <https://doi.org/10.3233/SHTI231108>, ##   <https://doi.org/10.3233/shti231108>. ##  ## A BibTeX entry for LaTeX users is ##  ##   @Article{, ##     title = {Health-analytics data to evidence suite (HADES): open-source software for observational research}, ##     author = {M. J. Schuemie and J. M. Reps and A. Black and F. DeFalco and L. Evans and E. Fridgeirsson and J. P. Gilbert and C. Knoll and M. Lavallee and G. Rao and P. Rijnbeek and K. Sadowski and A. Sena and J. Swerdel and R. D. Williams and M. A. Suchard}, ##     journal = {Studies in Health Technology and Informatics}, ##     year = {2024}, ##     volume = {310}, ##     pages = {966-970}, ##     doi = {10.3233/SHTI231108}, ##     url = {https://doi.org/10.3233/shti231108}, ##   } citation(\"Cyclops\") ## To cite Cyclops in publications use: ##  ##   Suchard MA, Simpson SE, Zorych I, Ryan P, Madigan D (2013). \"Massive ##   parallelization of serial inference algorithms for complex ##   generalized linear models.\" _ACM Transactions on Modeling and ##   Computer Simulation_, *23*, 10. doi:10.1145/2414416.2414791 ##   <https://doi.org/10.1145/2414416.2414791>. ##  ## A BibTeX entry for LaTeX users is ##  ##   @Article{, ##     author = {M. A. Suchard and S. E. Simpson and I. Zorych and P. Ryan and D. Madigan}, ##     title = {Massive parallelization of serial inference algorithms for complex generalized linear models}, ##     journal = {ACM Transactions on Modeling and Computer Simulation}, ##     volume = {23}, ##     pages = {10}, ##     year = {2013}, ##     doi = {10.1145/2414416.2414791}, ##   }"},{"path":"https://ohdsi.github.io/CohortMethod/articles/ResultsSchema.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Results schema of the CohortMethod package","text":"document describes data model output CohortMethod package, generated exportToCsv() function. vignette assumes already familiar CohortMethod package, read vignettes.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/ResultsSchema.html","id":"fields-with-minimum-values","dir":"Articles","previous_headings":"Introduction","what":"Fields with minimum values","title":"Results schema of the CohortMethod package","text":"fields contain patient counts fractions can easily converted patient counts. prevent identifiability, fields subject minimum value. value falls minimum, replaced negative value minimum. example, minimum subject count 5, actual count 2, value stored data model -5, represented ‘<5’ user. Note value 0 permissible, identifies persons. fields identified Min. count = ‘Yes’.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/ResultsSchema.html","id":"tables","dir":"Articles","previous_headings":"","what":"Tables","title":"Results schema of the CohortMethod package","text":"section find list tables fields.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Single studies using the CohortMethod package","text":"vignette describes can use CohortMethod package perform single new-user cohort study. walk steps needed perform exemplar study, selected well-studied topic effect coxibs versus non-selective non-steroidal anti-inflammatory drugs (NSAIDs) gastrointestinal (GI) bleeding-related hospitalization. simplicity, focus one coxib – celecoxib – one non-selective NSAID – diclofenac.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"data-extraction","dir":"Articles","previous_headings":"","what":"Data extraction","title":"Single studies using the CohortMethod package","text":"first step running CohortMethod extracting necessary data database server holding data Observational Medical Outcomes Partnership (OMOP) Common Data Model (CDM) format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"configuring-the-connection-to-the-server","dir":"Articles","previous_headings":"Data extraction","what":"Configuring the connection to the server","title":"Single studies using the CohortMethod package","text":"need tell R connect server data . CohortMethod uses DatabaseConnector package, provides createConnectionDetails function. Type ?createConnectionDetails specific settings required various database management systems (DBMS). example, one might connect PostgreSQL database using code: last lines define cdmDatabaseSchema, cohortDatabaseSchema, cohortTable variables. ’ll use later tell R data CDM format live, want write intermediate tables. Note Microsoft SQL Server, databaseschemas need specify database schema, example cdmDatabaseSchema <- \"my_cdm_data.dbo\". database platforms support temp tables, Oracle, also necessary provide schema user write access can used emulate temp tables. PostgreSQL supports temp tables, can set options(sqlRenderTempEmulationSchema = NULL) (set sqlRenderTempEmulationSchema .)","code":"library(CohortMethod) connectionDetails <- createConnectionDetails(dbms = \"postgresql\",                                              server = \"localhost/ohdsi\",                                              user = \"joe\",                                              password = \"supersecret\")  cdmDatabaseSchema <- \"my_cdm_data\" cohortDatabaseSchema <- \"my_results\" cohortTable <- \"my_cohorts\" options(sqlRenderTempEmulationSchema = NULL)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"preparing-the-exposures-and-outcomes","dir":"Articles","previous_headings":"Data extraction","what":"Preparing the exposures and outcome(s)","title":"Single studies using the CohortMethod package","text":"need define exposures outcomes study. , define exposures using OHDSI Capr package. define two exposure cohorts, one celecoxib one diclofenac. often good idea restrict analysis specific indication, maximize comparability two cohorts. case, restrict osteoarthritis knee. create cohort indication, starting first ever diagnosis, ending observation period end. ’ll pull outcome definition OHDSI PhenotypeLibrary: combine exposure outcome cohort definitions, use CohortGenerator generate cohorts: went well, now table cohorts interest. can see many entries per cohort:","code":"library(Capr)  celecoxibConceptId <- 1118084 diclofenacConceptId <- 1124300 osteoArthritisOfKneeConceptId <- 4079750  celecoxib <- cs(   descendants(celecoxibConceptId),   name = \"Celecoxib\" )  celecoxibCohort <- cohort(   entry = entry(     drugExposure(celecoxib)   ),   exit = exit(endStrategy = drugExit(celecoxib,                                      persistenceWindow = 30,                                      surveillanceWindow = 0)) )  diclofenac  <- cs(   descendants(diclofenacConceptId),   name = \"Diclofenac\" )  diclofenacCohort <- cohort(   entry = entry(     drugExposure(diclofenac)   ),   exit = exit(endStrategy = drugExit(diclofenac,                                      persistenceWindow = 30,                                      surveillanceWindow = 0)) )  osteoArthritisOfKnee <- cs(   descendants(osteoArthritisOfKneeConceptId),   name = \"Osteoarthritis of knee\" )  osteoArthritisOfKneeCohort <- cohort(   entry = entry(     conditionOccurrence(osteoArthritisOfKnee, firstOccurrence())   ),   exit = exit(     endStrategy = observationExit()   ) ) # Note: this will automatically assign cohort IDs 1,2, and 3, respectively: exposuresAndIndicationCohorts <- makeCohortSet(celecoxibCohort,                                                 diclofenacCohort,                                                 osteoArthritisOfKneeCohort) library(PhenotypeLibrary) outcomeCohorts <- getPlCohortDefinitionSet(77) # GI bleed allCohorts <- bind_rows(outcomeCohorts,                         exposuresAndIndicationCohorts)  library(CohortGenerator) cohortTableNames <- getCohortTableNames(cohortTable = cohortTable) createCohortTables(connectionDetails = connectionDetails,                    cohortDatabaseSchema = cohortDatabaseSchema,                    cohortTableNames = cohortTableNames) generateCohortSet(connectionDetails = connectionDetails,                   cdmDatabaseSchema = cdmDatabaseSchema,                   cohortDatabaseSchema = cohortDatabaseSchema,                   cohortTableNames = cohortTableNames,                   cohortDefinitionSet = allCohorts) connection <- DatabaseConnector::connect(connectionDetails) sql <- \"SELECT cohort_definition_id, COUNT(*) AS count FROM @cohortDatabaseSchema.@cohortTable GROUP BY cohort_definition_id\" cohortCounts <- DatabaseConnector::renderTranslateQuerySql(   connection = connection,   sql = sql,   cohortDatabaseSchema = cohortDatabaseSchema,   cohortTable = cohortTable   ) DatabaseConnector::disconnect(connection) ##   cohort_concept_id   count ## 1                 1  917230 ## 2                 2 1791695 ## 3                 3  993116 ## 4                77 1123643"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"extracting-the-data-from-the-server","dir":"Articles","previous_headings":"Data extraction","what":"Extracting the data from the server","title":"Single studies using the CohortMethod package","text":"Now can tell CohortMethod extract cohorts, construct covariates, extract necessary data analysis. Important: target comparator drug must included covariates, including descendant concepts. need manually add drugs descendants excludedCovariateConceptIds covariate settings. example code exclude concepts celecoxib diclofenac specify addDescendantsToExclude = TRUE: many parameters, documented CohortMethod manual. createDefaultCovariateSettings function described FeatureExtraction package. short, pointing function table created earlier indicating concept IDs table identify target, comparator, nesting cohort outcome. instruct default set covariates constructed, including covariates conditions, drug exposures, procedures found index date. customize set covariates, please refer FeatureExtraction package vignette typing vignette(\"UsingFeatureExtraction\", package=\"FeatureExtraction\"). let CohortMethod package construct sets new users: - patients exposure target comparator, keep whichever first, truncate exposure start second (first occurrences target comparator start simultaneously patient removed). - restrict first exposure overall (case redundant previous step). - require washout period 365 days, meaning patients less 365 days prior observation removed. - restrict period time drugs observed database. can especially helpful one exposures new market. - restrict nesting cohort, case indication. exposures within nesting cohort kept. can see many persons exposures left steps: cohortMethodData() function extracts data exposures, outcomes, covariates server stores thecohortMethodDataobject. object uses theAndromedapackage store information way ensures R run memory, even data large. can use genericsummary()` function view information data extracted:","code":"# Define which types of covariates must be constructed: covSettings <- createDefaultCovariateSettings(   excludedCovariateConceptIds = c(diclofenacConceptId, celecoxibConceptId),   addDescendantsToExclude = TRUE )  #Load data: cohortMethodData <- getDbCohortMethodData(   connectionDetails = connectionDetails,   cdmDatabaseSchema = cdmDatabaseSchema,   targetId = 1,   comparatorId = 2,   outcomeIds = 77,   exposureDatabaseSchema = cohortDatabaseSchema,   exposureTable = cohortTable,   outcomeDatabaseSchema = cohortDatabaseSchema,   outcomeTable = cohortTable,   nestingCohortDatabaseSchema = cohortDatabaseSchema,   nestingCohortTable = cohortTable,   getDbCohortMethodDataArgs = createGetDbCohortMethodDataArgs(     removeDuplicateSubjects = \"keep first, truncate to second\",     firstExposureOnly = TRUE,     washoutPeriod = 365,     restrictToCommonPeriod = TRUE,     nestingCohortId = 3,     covariateSettings = covSettings   ) ) cohortMethodData ## # CohortMethodData object ##  ## Target cohort ID: 1 ## Comparator cohort ID: 2 ## Nesting cohort ID: 3 ## Outcome cohort ID(s): 77 ##  ## Inherits from CovariateData: ## # CovariateData object ##  ## All cohorts ##  ## Inherits from Andromeda: ## # Andromeda object ## # Physical location:  C:\\Users\\admin_mschuemi.EU\\AppData\\Local\\Temp\\2\\RtmpKM2hKL\\file9986f2f17e6.duckdb ##  ## Tables: ## $analysisRef (analysisId, analysisName, domainId, startDay, endDay, isBinary, missingMeansZero) ## $cohorts (rowId, personSeqId, personId, treatment, cohortStartDate, daysFromObsStart, daysToCohortEnd, daysToObsEnd) ## $covariateRef (covariateId, covariateName, analysisId, conceptId, valueAsConceptId, collisions) ## $covariates (rowId, covariateId, covariateValue) ## $outcomes (rowId, outcomeId, daysToEvent) getAttritionTable(cohortMethodData) ##                       description targetPersons comparatorPersons targetExposures comparatorExposures ## 1                Original cohorts        917230            993116          917230              993116 ## 2 Keep first, truncate when e ...        845385            873667          845385              873667 ## 3             First exposure only        845385            873667          845385              873667 ## 4 365 days of prior observati ...        358646            515193          358646              515193 ## 5       Restrict to common period        358646            515193          358646              515193 ## 6      Restrict to nesting cohort         89318            128301           89318              128301 summary(cohortMethodData) ## CohortMethodData object summary ##  ## Target cohort ID: 1 ## Comparator cohort ID: 2 ## Nesting cohort ID: 3 ## Outcome cohort ID(s): 77 ##  ## Target persons: 89318 ## Comparator persons: 128301 ##  ## Outcome counts: ##    Event count Person count ## 77       37448        20123 ##  ## Covariates: ## Number of covariates: 85838 ## Number of non-zero covariate values: 111096472"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"saving-the-data-to-file","dir":"Articles","previous_headings":"Data extraction > Extracting the data from the server","what":"Saving the data to file","title":"Single studies using the CohortMethod package","text":"Creating cohortMethodData file can take considerable computing time, probably good idea save future sessions. cohortMethodData uses Andromeda, use R’s regular save function. Instead, ’ll use saveCohortMethodData() function: can use loadCohortMethodData() function load data future session.","code":"saveCohortMethodData(cohortMethodData, \"coxibVsNonselVsGiBleed.zip\")"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"defining-the-study-population","dir":"Articles","previous_headings":"","what":"Defining the study population","title":"Single studies using the CohortMethod package","text":"Typically, exposure cohorts outcome cohorts defined independently . want produce effect size estimate, need restrict cohorts put together, example removing exposed subjects outcome prior exposure, keeping outcomes fall within defined risk window. can use createStudyPopulation function: specify outcome ID use, people outcomes 365 days risk window start date removed. risk window defined starting cohort start date (index date, riskWindowStart = 0 startAnchor = \"cohort start\"), risk windows ends 30 days cohort ends (riskWindowEnd = 30 endAnchor = \"cohort end\"). Note risk windows truncated end observation study end date. also remove subjects time risk. see many people left study population can always use getAttritionTable function:","code":"studyPop <- createStudyPopulation(   cohortMethodData = cohortMethodData,   outcomeId = 77,   createStudyPopulationArgs = createCreateStudyPopulationArgs(     removeSubjectsWithPriorOutcome = TRUE,     priorOutcomeLookback = 365,     minDaysAtRisk = 1,     riskWindowStart = 0,     startAnchor = \"cohort start\",     riskWindowEnd = 30,     endAnchor = \"cohort end\"   ) ) getAttritionTable(studyPop) ##                       description targetPersons comparatorPersons targetExposures comparatorExposures ## 1                Original cohorts        917230            993116          917230              993116 ## 2 Keep first, truncate when e ...        845385            873667          845385              873667 ## 3             First exposure only        845385            873667          845385              873667 ## 4 365 days of prior observati ...        358646            515193          358646              515193 ## 5       Restrict to common period        358646            515193          358646              515193 ## 6      Restrict to nesting cohort         89318            128301           89318              128301 ## 7                No prior outcome         88134            126316           88134              126316 ## 8 Have at least 1 days at ris ...         88134            126316           88134              126316"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"propensity-scores","dir":"Articles","previous_headings":"","what":"Propensity scores","title":"Single studies using the CohortMethod package","text":"CohortMethod can use propensity scores adjust potential confounders. Instead traditional approach using handful predefined covariates, CohortMethod typically uses tens thousands covariates automatically constructed based conditions, procedures drugs records subjects.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"fitting-a-propensity-model","dir":"Articles","previous_headings":"Propensity scores","what":"Fitting a propensity model","title":"Single studies using the CohortMethod package","text":"can fit propensity model using covariates constructed getDbcohortMethodData() function: createPs() function uses Cyclops package fit large-scale regularized logistic regression. fit propensity model, Cyclops needs know hyperparameter value specifies variance prior. default Cyclops use cross-validation estimate optimal hyperparameter. However, aware can take really long time. can use prior control parameters createPs() specify Cyclops behavior, including using multiple CPUs speed-cross-validation.","code":"ps <- createPs(cohortMethodData = cohortMethodData, population = studyPop)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"propensity-score-diagnostics","dir":"Articles","previous_headings":"Propensity scores","what":"Propensity score diagnostics","title":"Single studies using the CohortMethod package","text":"can compute area receiver-operator curve (AUC) propensity score model: can also plot propensity score distribution. default, plotPS() function shows preference score, transformation propensity score adjusts differences sizes target comparator:  also possible inspect propensity model showing covariates non-zero coefficients: One advantage using regularization fitting propensity model coefficients shrink zero fall model. good idea inspect remaining variables anything , example variations drugs interest forgot exclude. Finally, can inspect percent population equipoise, meaning preference score 0.3 0.7: low equipoise indicates little overlap target comparator populations.","code":"computePsAuc(ps) ## [1] 0.8411435 plotPs(ps,        targetLabel = \"Celexocib\",        comparatorLabel = \"Diclofenac\",        showCountsLabel = TRUE,        showAucLabel = TRUE,        showEquipoiseLabel = TRUE) getPsModel(ps, cohortMethodData) ## # A tibble: 6 × 3 ##   coefficient covariateId covariateName                               ##         <dbl>       <dbl> <chr>                                       ## 1       -4.11  1150871413 ...gh 0 days relative to index: misoprostol ## 2        3.26     2001006 index year: 2001                            ## 3        3.14     2002006 index year: 2002                            ## 4        2.67     2003006 index year: 2003                            ## 5        2.38     2004006 index year: 2004                            ## 6        1.67     2007006 index year: 2007 CohortMethod::computeEquipoise(ps) ## [1] 0.4090277"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"using-the-propensity-score","dir":"Articles","previous_headings":"Propensity scores","what":"Using the propensity score","title":"Single studies using the CohortMethod package","text":"can use propensity scores trim, stratify, match, weigh population. example, one trim equipoise, meaning subjects preference score 0.3 0.7 kept:  Instead (additionally), stratify population based propensity score:  can also match subjects based propensity scores. example, ’re using one--one matching. default, createPs() use caliper 0.2 standardized logit scale:  can see effect trimming /matching population using getAttritionTable function: , like, can plot attrition diagram:","code":"trimmedPop <- trimByPs(ps,                        trimByPsArgs = createTrimByPsArgs(                          equipoiseBounds = c(0.3, 0.7)                        )) # Note: we need to also provide the original PS object so the preference score # is computed using the original relative sizes of the cohorts: plotPs(trimmedPop, ps) ## Trimming removed 55955 (63.5%) rows from the target, 70779 (56.0%) rows from the comparator. stratifiedPop <- stratifyByPs(ps,                                stratifyByPsArgs = createStratifyByPsArgs(                                 numberOfStrata = 5                               )) plotPs(stratifiedPop) matchedPop <- matchOnPs(ps,                         matchOnPsArgs = createMatchOnPsArgs(                           maxRatio = 1                         )) plotPs(matchedPop, ps) ## Population size after matching is 96046 getAttritionTable(matchedPop) ##                       description targetPersons comparatorPersons targetExposures comparatorExposures ## 1                Original cohorts        917230            993116          917230              993116 ## 2 Keep first, truncate when e ...        845385            873667          845385              873667 ## 3             First exposure only        845385            873667          845385              873667 ## 4 365 days of prior observati ...        358646            515193          358646              515193 ## 5       Restrict to common period        358646            515193          358646              515193 ## 6      Restrict to nesting cohort         89318            128301           89318              128301 ## 7     Matched on propensity score         48023             48023           48023               48023 drawAttritionDiagram(matchedPop)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"evaluating-covariate-balance","dir":"Articles","previous_headings":"Propensity scores","what":"Evaluating covariate balance","title":"Single studies using the CohortMethod package","text":"evaluate whether use propensity score indeed making two cohorts comparable, can compute covariate balance trimming, matching, /stratifying:   ‘matching’ population population extracted getDbCohortMethodData function, filtering steps. typically consider populations balanced , PS adjustment, covariates standardized difference means smaller 0.1.","code":"balance <- computeCovariateBalance(matchedPop, cohortMethodData) plotCovariateBalanceScatterPlot(balance,                                  showCovariateCountLabel = TRUE,                                  showMaxLabel = TRUE) plotCovariateBalanceOfTopVariables(balance)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"inspecting-select-population-characteristics","dir":"Articles","previous_headings":"Propensity scores","what":"Inspecting select population characteristics","title":"Single studies using the CohortMethod package","text":"customary include table paper lists select population characteristics matching/stratification/trimming. usually first table, referred ‘table 1’. generate table, can use createCmTable1 function:","code":"createCmTable1(balance) Before matching                      After matching                                                                               Target          Comparator           Target         Comparator            Characteristic                                          %               %          Std. diff %              %          Std. diff  Age group                                                                                                                            40 -  44                                              0.0             0.0        0.00      0.0            0.0        0.01         45 -  49                                              0.0             0.0        0.00      0.0            0.0        0.00         50 -  54                                              0.1             0.1        0.00      0.1            0.2       -0.01         55 -  59                                              0.4             0.5       -0.02      0.4            0.5       -0.01         60 -  64                                              0.9             1.3       -0.04      1.1            1.1       -0.01         65 -  69                                             22.9            21.2        0.04     22.5           22.4        0.00         70 -  74                                             28.3            26.6        0.04     27.3           27.2        0.00         75 -  79                                             22.0            20.9        0.03     21.3           21.5       -0.01         80 -  84                                             14.9            15.3       -0.01     15.2           15.1        0.00         85 -  89                                              7.4             9.3       -0.07      8.4            8.2        0.01         90 -  94                                              2.5             3.8       -0.07      3.0            3.0        0.00         95 -  99                                              0.5             0.9       -0.06      0.6            0.6        0.00        100 - 104                                              0.0             0.1       -0.02      0.1            0.1        0.00        105 - 109                                              0.0             0.0       -0.01      0.0            0.0       -0.01      Gender: female                                          62.9            67.2       -0.09     65.2           65.0        0.01      Medical history: General                                                                                                            Acute respiratory disease                             21.7            25.4       -0.09     23.6           23.5        0.00        Attention deficit hyperactivity disorder               0.2             0.2        0.00      0.2            0.2        0.00        Chronic liver disease                                  1.0             1.5       -0.05      1.1            1.1       -0.01        Chronic obstructive pulmonary disease                  9.6            11.3       -0.05     10.0            9.9        0.00        Crohn's disease                                        0.3             0.4       -0.02      0.4            0.4        0.00        Dementia                                               2.5             4.0       -0.08      3.0            2.9        0.00        Depressive disorder                                    9.1            11.9       -0.09     10.2           10.1        0.00        Diabetes mellitus                                     22.7            28.4       -0.13     24.7           24.6        0.00        Gastroesophageal reflux disease                       16.1            19.4       -0.09     17.4           17.0        0.01        Gastrointestinal hemorrhage                            3.5             3.8       -0.02      2.2            2.4       -0.01        Human immunodeficiency virus infection                 0.0             0.1       -0.02      0.1            0.0        0.00        Hyperlipidemia                                        45.5            55.3       -0.20     49.6           48.6        0.02        Hypertensive disorder                                 63.2            69.7       -0.14     65.3           65.0        0.01        Lesion of liver                                        0.5             0.8       -0.04      0.5            0.5        0.00        Obesity                                               10.2            11.7       -0.05     10.0            9.7        0.01        Osteoarthritis                                        82.3            76.0        0.15     77.9           78.1       -0.01        Pneumonia                                              4.3             5.2       -0.05      4.3            4.3        0.00        Psoriasis                                              1.3             1.5       -0.02      1.4            1.3        0.01        Renal impairment                                       6.9            13.4       -0.22      8.3            8.1        0.01        Rheumatoid arthritis                                   3.1             3.9       -0.05      3.4            3.4        0.00        Schizophrenia                                          0.1             0.1       -0.01      0.1            0.1        0.00        Ulcerative colitis                                     0.5             0.6       -0.01      0.5            0.5        0.00        Urinary tract infectious disease                      11.0            13.4       -0.08     11.8           11.8        0.00        Viral hepatitis C                                      0.2             0.3       -0.02      0.2            0.2        0.00      Medical history: Cardiovascular disease                                                                                             Atrial fibrillation                                    9.8            11.8       -0.07     10.0           10.0        0.00        Cerebrovascular disease                               11.2            12.8       -0.05     11.5           11.5        0.00        Coronary arteriosclerosis                             19.2            20.9       -0.04     18.9           19.1       -0.01        Heart disease                                         43.4            44.8       -0.03     41.9           41.9        0.00        Heart failure                                          7.9            10.4       -0.08      7.8            7.9        0.00        Ischemic heart disease                                 9.1             9.6       -0.02      8.4            8.5        0.00        Peripheral vascular disease                            8.8            12.5       -0.12      9.8            9.8        0.00        Pulmonary embolism                                     1.1             1.2       -0.02      1.1            1.1        0.00        Venous thrombosis                                      3.3             3.9       -0.03      3.4            3.6       -0.01      Medical history: Neoplasms                                                                                                          Malignant lymphoma                                     0.7             0.8       -0.01      0.8            0.8        0.00        Malignant neoplasm of anorectum                        0.3             0.3        0.01      0.3            0.3        0.00        Malignant neoplastic disease                          18.6            19.3       -0.02     19.0           19.1        0.00        Malignant tumor of breast                              3.7             4.1       -0.02      3.9            3.9        0.00        Malignant tumor of colon                               0.7             0.7        0.00      0.7            0.7        0.00        Malignant neoplasm of lung                             0.3             0.4       -0.02      0.4            0.4        0.00        Malignant neoplasm of urinary bladder                  0.9             0.8        0.00      0.9            0.8        0.01        Primary malignant neoplasm of prostate                 3.8             3.3        0.02      3.6            3.6        0.00      Medication use                                                                                                                      Agents acting on the renin-angiotensin system         50.1            53.4       -0.07     52.2           52.0        0.00        Antibacterials for systemic use                       68.8            70.5       -0.04     68.6           68.6        0.00        Antidepressants                                       28.2            30.3       -0.05     30.0           30.1        0.00        Antiepileptics                                        20.0            21.6       -0.04     20.6           20.9       -0.01        Antiinflammatory and antirheumatic products           36.4            36.1        0.01     37.3           37.3        0.00        Antineoplastic agents                                  4.9             5.8       -0.04      5.2            5.1        0.00        Antipsoriatics                                         0.9             1.3       -0.05      0.9            1.0       -0.01        Antithrombotic agents                                 29.6            24.4        0.12     24.4           24.6       -0.01        Beta blocking agents                                  36.9            41.2       -0.09     38.3           38.0        0.01        Calcium channel blockers                              28.1            31.4       -0.07     29.3           29.1        0.00        Diuretics                                             45.0            46.6       -0.03     45.2           45.4        0.00        Drugs for acid related disorders                      41.1            43.1       -0.04     39.8           40.1       -0.01        Drugs for obstructive airway diseases                 51.1            54.6       -0.07     53.6           53.0        0.01        Drugs used in diabetes                                18.4            22.1       -0.09     19.6           19.5        0.00        Immunosuppressants                                     4.1             5.8       -0.08      4.8            4.6        0.01        Lipid modifying agents                                55.2            59.2       -0.08     57.9           57.5        0.01        Opioids                                               64.7            55.1        0.20     58.5           59.0       -0.01        Psycholeptics                                         34.1            32.8        0.03     33.8           34.2       -0.01        Psychostimulants, agents used for adhd and nootropics  1.7             1.9       -0.02      2.0            2.1       -0.01"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"generalizability","dir":"Articles","previous_headings":"Propensity scores","what":"Generalizability","title":"Single studies using the CohortMethod package","text":"goal propensity score adjustments typically make target comparator cohorts comparably, allow proper causal inference. However, , often need modify population, example dropping subjects counterpart exposure cohort. population end estimating effect may end different population started . important question : different? ways? populations adjustment different, estimated effect may generalize original population (effect modification present). getGeneralizabilityTable() function informs differences: case, used PS matching, likely aiming estimate average treatment effect treated (ATT). reason, getGeneralizabilityTable() function automatically selected target cohort basis evaluating generalizability: shows, covariate, mean value PS adjustment target cohort. Also shown standardized difference mean, table reverse sorted absolute standard difference mean (ASDM).","code":"getGeneralizabilityTable(balance)  [38;5;246m# A tibble: 85,838 × 5 [39m    covariateId covariateName                     beforeMatchingMean afterMatchingMean stdDiff           [3m [38;5;246m<dbl> [39m [23m  [3m [38;5;246m<chr> [39m [23m                                           [3m [38;5;246m<dbl> [39m [23m              [3m [38;5;246m<dbl> [39m [23m    [3m [38;5;246m<dbl> [39m [23m  [38;5;250m 1 [39m   [4m4 [24m160 [4m4 [24m [4m3 [24m [4m9 [24m504 ...: Administration of anesthesia             0.157             0.029 [4m9 [24m   0.447  [38;5;250m 2 [39m   [4m2 [24m105 [4m1 [24m [4m0 [24m [4m3 [24m504 ...cing (total knee arthroplasty)             0.116             0.010 [4m2 [24m   0.446  [38;5;250m 3 [39m  [4m3 [24m [4m8 [24m003 [4m1 [24m [4m6 [24m [4m2 [24m804 ...s and Devices - Other Implants             0.124             0.018 [4m5 [24m   0.420  [38;5;250m 4 [39m  [4m3 [24m [4m8 [24m003 [4m2 [24m [4m0 [24m [4m8 [24m804 ...vices - General Classification             0.139             0.029 [4m6 [24m   0.401  [38;5;250m 5 [39m  [4m3 [24m [4m8 [24m003 [4m3 [24m [4m9 [24m [4m0 [24m804 ... Room - General Classification             0.132             0.027 [4m9 [24m   0.391  [38;5;250m 6 [39m  [4m3 [24m [4m8 [24m003 [4m2 [24m [4m1 [24m [4m3 [24m804 ...hesia - General Classification             0.120             0.024 [4m7 [24m   0.374  [38;5;250m 7 [39m   764 [4m6 [24m [4m0 [24m [4m8 [24m504 ...dex: Preprocedural examination             0.097 [4m8 [24m            0.015 [4m6 [24m   0.361  [38;5;250m 8 [39m  [4m3 [24m [4m8 [24m003 [4m2 [24m [4m4 [24m [4m5 [24m804 ... - Evaluation Or Re-Evaluation             0.118             0.030 [4m2 [24m   0.339  [38;5;250m 9 [39m  [4m3 [24m [4m8 [24m003 [4m1 [24m [4m3 [24m [4m8 [24m804 ...rmacy - General Classification             0.175             0.069 [4m2 [24m   0.326  [38;5;250m10 [39m   [4m4 [24m002 [4m0 [24m [4m1 [24m [4m4 [24m212 ...ndex: Pain following procedure             0.075 [4m3 [24m            0.011 [4m0 [24m   0.321  [38;5;246m# ℹ 85,828 more rows [39m"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"follow-up-and-power","dir":"Articles","previous_headings":"","what":"Follow-up and power","title":"Single studies using the CohortMethod package","text":"start fitting outcome model, might interested know whether sufficient power detect particular effect size. makes sense perform power calculations study population fully defined, taking account loss various inclusion exclusion criteria (prior outcomes), loss due matching /trimming. Since sample size fixed retrospective studies (data already collected), true effect size unknown, CohortMethod package provides function compute minimum detectable relative risk (MDRR) instead: example used studyPop object, population matching trimming. want know MDRR matching, use matchedPop object created earlier instead: Even thought MDRR matched population higher, meaning less power, course fooled: matching likely eliminates confounding, therefore preferred matching. gain better understanding amount follow-available can also inspect distribution follow-time. defined follow-time time risk, censored occurrence outcome. getFollowUpDistribution can provide simple overview: output telling us number days follow-quantile study population . can also plot distribution:","code":"computeMdrr(   population = studyPop,   modelType = \"cox\",   alpha = 0.05,   power = 0.8,   twoSided = TRUE ) ##   targetPersons comparatorPersons targetExposures comparatorExposures targetDays comparatorDays totalOutcomes     mdrr         se ## 1         88134            126316           88134              126316   12087401        9619724          1252 1.174598 0.05744113 computeMdrr(   population = matchedPop,   modelType = \"cox\",   alpha = 0.05,   power = 0.8,   twoSided = TRUE ) ##   targetPersons comparatorPersons targetExposures comparatorExposures targetDays comparatorDays totalOutcomes     mdrr         se ## 1         48023             48023           48023               48023    6752916        3896834           597 1.257748 0.08185455 getFollowUpDistribution(population = matchedPop) ##   100% 75% 50% 25%   0% Treatment ## 1    1  60  60 130 3486         1 ## 2    1  45  60  71 3833         0 plotFollowUpDistribution(population = matchedPop)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"outcome-models","dir":"Articles","previous_headings":"","what":"Outcome models","title":"Single studies using the CohortMethod package","text":"outcome model model describing variables associated outcome.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"fitting-a-simple-outcome-model","dir":"Articles","previous_headings":"Outcome models","what":"Fitting a simple outcome model","title":"Single studies using the CohortMethod package","text":"theory fit outcome model without using propensity scores. example fitting outcome model using Cox regression: course want make use matching done propensity score: Note define sub-population matchedPop object, created earlier matching propensity score. Instead matching stratifying can also perform Inverse Probability Treatment Weighting (IPTW): Note case may want use bootstrap compute confidence interval.","code":"outcomeModel <- fitOutcomeModel(   population = studyPop,   fitOutcomeModelArgs = createFitOutcomeModelArgs(     modelType = \"cox\"   ) ) outcomeModel ## Model type: cox ## Stratified: FALSE ## Use covariates: FALSE ## Use inverse probability of treatment weighting: FALSE ## Target estimand: ate ## Status: OK ##  ##            Estimate lower .95 upper .95     logRr seLogRr ## treatment  0.961778  0.856018  1.080701 -0.038971  0.0595 outcomeModel <- fitOutcomeModel(   population = matchedPop,   fitOutcomeModelArgs = createFitOutcomeModelArgs(     modelType = \"cox\"   ) ) outcomeModel ## Model type: cox ## Stratified: FALSE ## Use covariates: FALSE ## Use inverse probability of treatment weighting: FALSE ## Target estimand: att ## Status: OK ##  ##           Estimate lower .95 upper .95    logRr seLogRr ## treatment  0.84469   0.71412   1.00030 -0.16878   0.086 outcomeModel <- fitOutcomeModel(   population = ps,   fitOutcomeModelArgs = createFitOutcomeModelArgs(     modelType = \"cox\",     inversePtWeighting = TRUE,     bootstrapCi = TRUE   ) ) outcomeModel ## Model type: cox ## Stratified: FALSE ## Use covariates: FALSE ## Use inverse probability of treatment weighting: TRUE ## Target estimand: att ## Status: OK ##  ##           Estimate lower .95 upper .95    logRr seLogRr ## treatment  0.66899   0.47331   0.97783 -0.40199   0.178"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"adding-interaction-terms","dir":"Articles","previous_headings":"Outcome models","what":"Adding interaction terms","title":"Single studies using the CohortMethod package","text":"may interested whether effect different across different groups population. explore , may include interaction terms model. example include three interaction terms: prudent verify covariate balance also achieved subgroups interest. example, can check covariate balance subpopulation females:","code":"interactionCovariateIds <- c(8532001, 201826210, 21600960413)  # 8532001 = Female # 201826210 = Type 2 Diabetes # 21600960413 = Concurent use of antithrombotic agents outcomeModel <- fitOutcomeModel(   population = matchedPop,   cohortMethodData = cohortMethodData,   fitOutcomeModelArgs = createFitOutcomeModelArgs(     modelType = \"cox\",     interactionCovariateIds = interactionCovariateIds   ) ) outcomeModel ## Model type: cox ## Stratified: FALSE ## Use covariates: FALSE ## Use inverse probability of treatment weighting: FALSE ## Target estimand: att ## Status: OK ##  ##                                                                                                                                         Estimate lower .95 upper .95     logRr seLogRr ## treatment                                                                                                                               0.809658  0.590267  1.113710 -0.211144  0.1620 ## treatment * condition_era group (ConditionGroupEraLongTerm) during day -365 through 0 days relative to index: Type 2 diabetes mellitus  0.860438  0.601425  1.233185 -0.150314  0.1832 ## treatment * drug_era group (DrugGroupEraOverlapping) during day 0 through 0 days relative to index: ANTITHROMBOTIC AGENTS               1.011228  0.701484  1.462634  0.011166  0.1875 ## treatment * gender = FEMALE                                                                                                             1.111761  0.791320  1.560599  0.105946  0.1732 balanceFemale <- computeCovariateBalance(   population,   cohortMethodData,   computeCovariateBalanceArgs = createComputeCovariateBalanceArgs(     subgroupCovariateId = 8532001   ) ) plotCovariateBalanceScatterPlot(balanceFemale)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"adding-covariates-to-the-outcome-model","dir":"Articles","previous_headings":"Outcome models","what":"Adding covariates to the outcome model","title":"Single studies using the CohortMethod package","text":"One final refinement use covariates used fit propensity model also fit outcome model. way robust misspecification model, likely remove bias. use regularized Cox regression Cyclops package. (Note treatment variable automatically excluded regularization.)","code":"outcomeModel <- fitOutcomeModel(   population = matchedPop,   cohortMethodData = cohortMethodData,   fitOutcomeModelArgs = createFitOutcomeModelArgs(     modelType = \"cox\",     useCovariates = TRUE,   ) ) outcomeModel ## Model type: cox ## Stratified: TRUE ## Use covariates: TRUE ## Use inverse probability of treatment weighting: FALSE ## Target estimand: att ## Status: OK ## Prior variance: 0.0281314772156526 ##  ##            Estimate lower .95 upper .95     logRr seLogRr ## treatment  0.925449  0.717305  1.194886 -0.077476  0.1302"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"inspecting-the-outcome-model","dir":"Articles","previous_headings":"Outcome models","what":"Inspecting the outcome model","title":"Single studies using the CohortMethod package","text":"can inspect details outcome model: can also see covariates ended outcome model:","code":"exp(coef(outcomeModel)) ## 4393168283078717  ##        0.9254494 exp(confint(outcomeModel)) ## [1] 0.7173049 1.1948858 getOutcomeModel(outcomeModel, cohortMethodData) ##   coefficient           id      name ## 1  -0.0774758 4.393168e+15 Treatment"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"kaplan-meier-plot","dir":"Articles","previous_headings":"Outcome models","what":"Kaplan-Meier plot","title":"Single studies using the CohortMethod package","text":"can create Kaplan-Meier plot:  Note Kaplan-Meier plot automatically adjust stratification, matching, trimming may applied.","code":"plotKaplanMeier(matchedPop, includeZero = FALSE)"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"time-to-event-plot","dir":"Articles","previous_headings":"Outcome models","what":"Time-to-event plot","title":"Single studies using the CohortMethod package","text":"can also plot time--event, showing events index date, events outside defined time--risk window. plot can provide insight temporal pattern outcome relative exposures:  Note plot show adjustment propensity score.","code":"plotTimeToEvent(   cohortMethodData = cohortMethodData,   outcomeId = 77,   minDaysAtRisk = 1,   riskWindowStart = 0,   startAnchor = \"cohort start\",   riskWindowEnd = 30,   endAnchor = \"cohort end\" )"},{"path":"https://ohdsi.github.io/CohortMethod/articles/SingleStudies.html","id":"acknowledgments","dir":"Articles","previous_headings":"","what":"Acknowledgments","title":"Single studies using the CohortMethod package","text":"Considerable work dedicated provide CohortMethod package. , CohortMethod makes extensive use Cyclops package. work supported part National Science Foundation grant IIS 1251151.","code":"citation(\"CohortMethod\") ## To cite CohortMethod in publications use: ##  ##   Schuemie MJ, Reps JM, Black A, DeFalco F, Evans L, Fridgeirsson E, Gilbert JP, Knoll C, Lavallee M, Rao G, Rijnbeek P, Sadowski K, Sena A, Swerdel J, Williams RD, Suchard MA ##   (2024). \"Health-analytics data to evidence suite (HADES): open-source software for observational research.\" _Studies in Health Technology and Informatics_, *310*, 966-970. ##   doi:10.3233/SHTI231108 <https://doi.org/10.3233/SHTI231108>, <https://doi.org/10.3233/shti231108>. ##  ## A BibTeX entry for LaTeX users is ##  ##   @Article{, ##     title = {Health-analytics data to evidence suite (HADES): open-source software for observational research}, ##     author = {M. J. Schuemie and J. M. Reps and A. Black and F. DeFalco and L. Evans and E. Fridgeirsson and J. P. Gilbert and C. Knoll and M. Lavallee and G. Rao and P. Rijnbeek and K. Sadowski and A. Sena and J. Swerdel and R. D. Williams and M. A. Suchard}, ##     journal = {Studies in Health Technology and Informatics}, ##     year = {2024}, ##     volume = {310}, ##     pages = {966-970}, ##     doi = {10.3233/SHTI231108}, ##     url = {https://doi.org/10.3233/shti231108}, ##   } citation(\"Cyclops\") ## To cite Cyclops in publications use: ##  ##   Suchard MA, Simpson SE, Zorych I, Ryan P, Madigan D (2013). \"Massive parallelization of serial inference algorithms for complex generalized linear models.\" _ACM Transactions on ##   Modeling and Computer Simulation_, *23*, 10. doi:10.1145/2414416.2414791 <https://doi.org/10.1145/2414416.2414791>. ##  ## A BibTeX entry for LaTeX users is ##  ##   @Article{, ##     author = {M. A. Suchard and S. E. Simpson and I. Zorych and P. Ryan and D. Madigan}, ##     title = {Massive parallelization of serial inference algorithms for complex generalized linear models}, ##     journal = {ACM Transactions on Modeling and Computer Simulation}, ##     volume = {23}, ##     pages = {10}, ##     year = {2013}, ##     doi = {10.1145/2414416.2414791}, ##   }"},{"path":"https://ohdsi.github.io/CohortMethod/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Martijn Schuemie. Author, maintainer. Marc Suchard. Author. Patrick Ryan. Author.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Schuemie MJ, Reps JM, Black , DeFalco F, Evans L, Fridgeirsson E, Gilbert JP, Knoll C, Lavallee M, Rao G, Rijnbeek P, Sadowski K, Sena , Swerdel J, Williams RD, Suchard MA (2024). “Health-analytics data evidence suite (HADES): open-source software observational research.” Studies Health Technology Informatics, 310, 966-970. doi:10.3233/SHTI231108, https://doi.org/10.3233/shti231108.","code":"@Article{,   title = {Health-analytics data to evidence suite (HADES): open-source software for observational research},   author = {M. J. Schuemie and J. M. Reps and A. Black and F. DeFalco and L. Evans and E. Fridgeirsson and J. P. Gilbert and C. Knoll and M. Lavallee and G. Rao and P. Rijnbeek and K. Sadowski and A. Sena and J. Swerdel and R. D. Williams and M. A. Suchard},   journal = {Studies in Health Technology and Informatics},   year = {2024},   volume = {310},   pages = {966-970},   doi = {10.3233/SHTI231108},   url = {https://doi.org/10.3233/shti231108}, }"},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"cohortmethod","dir":"","previous_headings":"","what":"New-User Cohort Method with Large Scale Propensity and Outcome Models","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"CohortMethod part HADES.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"CohortMethod R package performing new-user cohort studies observational database OMOP Common Data Model.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"Extracts necessary data database OMOP Common Data Model format. Uses large set covariates propensity outcome model, including example drugs, diagnoses, procedures, well age, comorbidity indexes, etc. Large scale regularized regression fit propensity outcome models. Includes function trimming, stratifying, matching, weighting propensity scores. Includes diagnostic functions, including propensity score distribution plots plots showing covariate balance matching /trimming. Supported outcome models (conditional) logistic regression, (conditional) Poisson regression, (conditional) Cox regression.","code":""},{"path":[]},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"technology","dir":"","previous_headings":"","what":"Technology","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"CohortMethod R package, functions implemented C++.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"system-requirements","dir":"","previous_headings":"","what":"System Requirements","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"Requires R (version 3.6.0 higher). Installation Windows requires RTools. Libraries used CohortMethod require Java.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"See instructions configuring R environment, including RTools Java. R, use following commands download install CohortMethod: Optionally, run check CohortMethod correctly installed: dbms, server, user, password need changed settings database environment. Type details configure database connection.","code":"install.packages(\"remotes\") remotes::install_github(\"ohdsi/CohortMethod\") connectionDetails <- createConnectionDetails(dbms=\"postgresql\",                                              server=\"my_server.org\",                                              user = \"joe\",                                              password = \"super_secret\")  checkCmInstallation(connectionDetails) ?createConnectionDetails"},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"user-documentation","dir":"","previous_headings":"","what":"User Documentation","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"Documentation can found package website. PDF versions documentation also available: Vignette: Single studies using CohortMethod package Vignette: Running multiple analyses using CohortMethod package Package manual: CohortMethod.pdf","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"support","dir":"","previous_headings":"","what":"Support","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"Developer questions/comments/feedback: OHDSI Forum use GitHub issue tracker bugs/issues/enhancements","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"Read can contribute package.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"CohortMethod licensed Apache License 2.0","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"development","dir":"","previous_headings":"","what":"Development","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"CohortMethod developed R Studio.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"development-status","dir":"","previous_headings":"","what":"Development status","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"CohortMethod actively used several studies ready use.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"New-User Cohort Method with Large Scale Propensity and Outcome Models","text":"project supported part National Science Foundation grant IIS 1251151.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/adjustedKm.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute a weight-adjusted Kaplan-Meier curve — adjustedKm","title":"Compute a weight-adjusted Kaplan-Meier curve — adjustedKm","text":"Compute weight-adjusted Kaplan-Meier curve","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/adjustedKm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute a weight-adjusted Kaplan-Meier curve — adjustedKm","text":"","code":"adjustedKm(weight, time, y)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/adjustedKm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute a weight-adjusted Kaplan-Meier curve — adjustedKm","text":"weight Vector observation weights time Vector event times y Vector outcomes (0 indicates censoring, 1 indicates event--interest)","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/checkCmInstallation.html","id":null,"dir":"Reference","previous_headings":"","what":"Check is CohortMethod and its dependencies are correctly installed — checkCmInstallation","title":"Check is CohortMethod and its dependencies are correctly installed — checkCmInstallation","text":"Check CohortMethod dependencies correctly installed","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/checkCmInstallation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check is CohortMethod and its dependencies are correctly installed — checkCmInstallation","text":"","code":"checkCmInstallation(connectionDetails)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/checkCmInstallation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check is CohortMethod and its dependencies are correctly installed — checkCmInstallation","text":"connectionDetails R object typeconnectionDetails created using function createConnectionDetails DatabaseConnector package.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/checkCmInstallation.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check is CohortMethod and its dependencies are correctly installed — checkCmInstallation","text":"function checks whether CohortMethod dependencies correctly installed. check database connectivity, large scale regression engine (Cyclops), large data object handling (ff).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/CohortMethod-package.html","id":null,"dir":"Reference","previous_headings":"","what":"CohortMethod: New-User Cohort Method with Large Scale Propensity and Outcome Models — CohortMethod-package","title":"CohortMethod: New-User Cohort Method with Large Scale Propensity and Outcome Models — CohortMethod-package","text":"Functions performing new-user cohort studies observational database OMOP Common Data Model. Can extract necessary data database use large set covariates propensity outcome model, including example drugs, diagnoses, procedures, well age, comorbidity indexes, etc. Large scale regularized regression used fit propensity outcome models. Functions included trimming, stratifying, (variable fixed ratio) matching weighting propensity scores, well diagnostic functions, propensity score distribution plots plots showing covariate balance matching /trimming. Supported outcome models (conditional) logistic regression, (conditional) Poisson regression, (stratified) Cox regression. Also included Kaplan-Meier plots can adjust stratification matching.","code":""},{"path":[]},{"path":"https://ohdsi.github.io/CohortMethod/reference/CohortMethod-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"CohortMethod: New-User Cohort Method with Large Scale Propensity and Outcome Models — CohortMethod-package","text":"Maintainer: Martijn Schuemie schuemie@ohdsi.org Authors: Marc Suchard Patrick Ryan","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/CohortMethodData-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Cohort Method Data — CohortMethodData-class","title":"Cohort Method Data — CohortMethodData-class","text":"CohortMethodData S4 class inherits CoviarateData, turn inherits Andromeda. contains information cohorts, outcomes, baseline covariates. Information multiple outcomes can captured efficiency reasons. CohortMethodData typically created using getDbCohortMethodData(), can saved using saveCohortMethodData(), loaded using loadCohortMethodData().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/CohortMethodData-class.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cohort Method Data — CohortMethodData-class","text":"","code":"# S4 method for class 'CohortMethodData' show(object)  # S4 method for class 'CohortMethodData' summary(object)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/CohortMethodData-class.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cohort Method Data — CohortMethodData-class","text":"object object type CohortMethodData.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/cohortMethodDataSimulationProfile.html","id":null,"dir":"Reference","previous_headings":"","what":"A simulation profile — cohortMethodDataSimulationProfile","title":"A simulation profile — cohortMethodDataSimulationProfile","text":"simulation profile","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/cohortMethodDataSimulationProfile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A simulation profile — cohortMethodDataSimulationProfile","text":"","code":"data(cohortMethodDataSimulationProfile)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeCovariateBalance.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute covariate balance before and after PS adjustment — computeCovariateBalance","title":"Compute covariate balance before and after PS adjustment — computeCovariateBalance","text":"every covariate, prevalence treatment comparator groups matching/trimming/weighting computed. variable ratio matching used balance score corrected according method described Austin et al (2008).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeCovariateBalance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute covariate balance before and after PS adjustment — computeCovariateBalance","text":"","code":"computeCovariateBalance(   population,   cohortMethodData,   computeCovariateBalanceArgs = createComputeCovariateBalanceArgs() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeCovariateBalance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute covariate balance before and after PS adjustment — computeCovariateBalance","text":"population data frame containing people remaining PS adjustment. cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). computeCovariateBalanceArgs Settings object created createComputeCovariateBalanceArgs().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeCovariateBalance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute covariate balance before and after PS adjustment — computeCovariateBalance","text":"Returns tibble describing covariate balance PS adjustment, one row per covariate, data covariateRef table CohortMethodData object, following additional columns: beforeMatchingMeanTarget: (weighted) mean value target PS adjustment. beforeMatchingMeanComparator: (weighted) mean value comparator PS adjustment. beforeMatchingSumTarget: (weighted) sum value target PS adjustment. beforeMatchingSumComparator: (weighted) sum value comparator PS adjustment. beforeMatchingSdTarget: standard deviation value target PS adjustment. beforeMatchingSdComparator: standard deviation value comparator PS adjustment. beforeMatchingMean: mean value across target comparator PS adjustment. beforeMatchingSd: standard deviation value across target comparator PS adjustment. beforeMatchingStdDiff: standardized difference means comparing target comparator PS adjustment. beforeMatchingSdmVariance: variance standardized difference means comparing target comparator PS adjustment. beforeMatchingSdmP : P-value whether abs(beforeMatchingStdDiff) exceeds threshold. beforeMatchingBalanced : TRUE covariate considered balanced target comparator PS adjustment (depending threshold alpha settings). afterMatchingMeanTarget: (weighted) mean value target PS adjustment. afterMatchingMeanComparator: (weighted) mean value comparator PS adjustment. afterMatchingSumTarget: (weighted) sum value target PS adjustment. afterMatchingSumComparator: (weighted) sum value comparator PS adjustment. afterMatchingSdTarget: standard deviation value target PS adjustment. afterMatchingSdComparator: standard deviation value comparator PS adjustment. afterMatchingMean: mean value across target comparator PS adjustment. afterMatchingSd: standard deviation value across target comparator PS adjustment. afterMatchingStdDiff: standardized difference means comparing target comparator PS adjustment. afterMatchingSdmVariance: variance standardized difference means comparing target comparator PS adjustment. afteMatchingSdmP : P-value whether abs(beforeMatchingStdDiff) exceeds threshold. afteMatchingBalanced : TRUE covariate considered balanced target comparator PS adjustment (depending threshold alpha settings). targetStdDiff: standardized difference means comparing target PS adjustment target PS adjustment. comparatorStdDiff: standardized difference means comparing comparator PS adjustment comparator PS adjustment. -targetComparatorStdDiff:  standardized difference means comparing entire population PS adjustment entire population PS adjustment. 'beforeMatchingStdDiff' 'afterMatchingStdDiff' columns inform balance: target comparator sufficiently similar terms baseline covariates allow valid causal estimation? 'targetStdDiff', 'comparatorStdDiff', 'targetComparatorStdDiff' columns inform generalizability: cohorts PS adjustment sufficiently similar cohorts adjustment allow generalizing findings original cohorts?","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeCovariateBalance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute covariate balance before and after PS adjustment — computeCovariateBalance","text":"population data frame following three columns: rowId (numeric): unique identifier row (e.g. person ID). treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeCovariateBalance.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute covariate balance before and after PS adjustment — computeCovariateBalance","text":"Austin, PC (2008) Assessing balance measured baseline covariates using many--one matching propensity-score. Pharmacoepidemiology Drug Safety, 17: 1218-1225. Hripcsak G, Zhang L, Chen Y, Li K, Suchard MA, Ryan PB, Schuemie MJ (2025) Assessing Covariate Balance Small Sample Sizes. medRxiv. Feb 21:2024.04.23.24306230.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeEquipoise.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute fraction in equipoise — computeEquipoise","title":"Compute fraction in equipoise — computeEquipoise","text":"Compute fraction equipoise","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeEquipoise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute fraction in equipoise — computeEquipoise","text":"","code":"computeEquipoise(data, equipoiseBounds = c(0.3, 0.7))"},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeEquipoise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute fraction in equipoise — computeEquipoise","text":"data data frame least two columns described . equipoiseBounds bounds preference score determine whether subject equipoise.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeEquipoise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute fraction in equipoise — computeEquipoise","text":"numeric value (fraction equipoise) 0 1.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeEquipoise.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute fraction in equipoise — computeEquipoise","text":"Computes fraction population (union target comparator cohorts) clinical equipoise (.e. reasonable chance receiving either target comparator, based baseline characteristics). data frame least following two columns: treatment (integer): Column indicating whether person target (1) comparator (0) group propensityScore (numeric): Propensity score","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeEquipoise.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute fraction in equipoise — computeEquipoise","text":"Walker , Patrick AR, Lauer MS, Hornbrook MC, Marin MG, Platt R, Roger VL, Stang P, Schneeweiss S. (2013) tool assessing feasibility comparative effectiveness research, Comparative Effective Research, 3, 11-20","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeMdrr.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the minimum detectable relative risk — computeMdrr","title":"Compute the minimum detectable relative risk — computeMdrr","text":"Compute minimum detectable relative risk","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeMdrr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the minimum detectable relative risk — computeMdrr","text":"","code":"computeMdrr(   population,   alpha = 0.05,   power = 0.8,   twoSided = TRUE,   modelType = \"cox\" )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeMdrr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the minimum detectable relative risk — computeMdrr","text":"population data frame describing study population created using createStudyPopulation function. least columns: personSeqId, treatment, outcomeCount, timeAtRisk. alpha Type error. power 1 - beta, beta type II error. twoSided Consider two-sided test? modelType type outcome model used. Possible values \"logistic\", \"poisson\", \"cox\". Currently \"cox\" supported.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeMdrr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the minimum detectable relative risk — computeMdrr","text":"data frame MDRR counts.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeMdrr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute the minimum detectable relative risk — computeMdrr","text":"Compute minimum detectable relative risk (MDRR) expected standard error (SE) given study population, using actual observed sample size number outcomes. Currently, computations Cox logistic models implemented. Cox model, computations Schoenfeld (1983) used. logistic models Wald's z-test used.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computeMdrr.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute the minimum detectable relative risk — computeMdrr","text":"Schoenfeld DA (1983) Sample-size formula proportional-hazards regression model, Biometrics, 39(3), 499-503","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computePsAuc.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the area under the ROC curve — computePsAuc","title":"Compute the area under the ROC curve — computePsAuc","text":"Compute area ROC curve propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computePsAuc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the area under the ROC curve — computePsAuc","text":"","code":"computePsAuc(data, confidenceIntervals = FALSE, maxRows = 1e+05)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/computePsAuc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the area under the ROC curve — computePsAuc","text":"data data frame least two columns described confidenceIntervals Compute 95 percent confidence intervals (computationally expensive large data sets) maxRows Maximum number rows use. number rows larger, random sample taken. can increase speed, minor cost precision. Set 0 use data.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computePsAuc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the area under the ROC curve — computePsAuc","text":"tibble holding AUC 95 percent confidence interval","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computePsAuc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute the area under the ROC curve — computePsAuc","text":"data frame least following two columns: treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/computePsAuc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the area under the ROC curve — computePsAuc","text":"","code":"treatment <- rep(0:1, each = 100) propensityScore <- c(rnorm(100, mean = 0.4, sd = 0.25), rnorm(100, mean = 0.6, sd = 0.25)) data <- data.frame(treatment = treatment, propensityScore = propensityScore) data <- data[data$propensityScore > 0 & data$propensityScore < 1, ] computePsAuc(data) #> [1] 0.6716202"},{"path":"https://ohdsi.github.io/CohortMethod/reference/convertUntypedListToCmAnalysesSpecifications.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert untyped list to SccsAnalysesSpecifications — convertUntypedListToCmAnalysesSpecifications","title":"Convert untyped list to SccsAnalysesSpecifications — convertUntypedListToCmAnalysesSpecifications","text":"Convert untyped list SccsAnalysesSpecifications","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/convertUntypedListToCmAnalysesSpecifications.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert untyped list to SccsAnalysesSpecifications — convertUntypedListToCmAnalysesSpecifications","text":"","code":"convertUntypedListToCmAnalysesSpecifications(untypedList)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/convertUntypedListToCmAnalysesSpecifications.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert untyped list to SccsAnalysesSpecifications — convertUntypedListToCmAnalysesSpecifications","text":"untypedList list untyped objects. example, objects call jsonlite::fromJSON(). Importantly, simplifyDataFrame must set FALSE .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/convertUntypedListToCmAnalysesSpecifications.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert untyped list to SccsAnalysesSpecifications — convertUntypedListToCmAnalysesSpecifications","text":"object type SccsAnalysesSpecifications.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysesSpecifications.html","id":null,"dir":"Reference","previous_headings":"","what":"Create full CM analysis specifications — createCmAnalysesSpecifications","title":"Create full CM analysis specifications — createCmAnalysesSpecifications","text":"Create full CM analysis specifications","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysesSpecifications.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create full CM analysis specifications — createCmAnalysesSpecifications","text":"","code":"createCmAnalysesSpecifications(   cmAnalysisList,   targetComparatorOutcomesList,   analysesToExclude = NULL,   refitPsForEveryOutcome = FALSE,   refitPsForEveryStudyPopulation = TRUE,   cmDiagnosticThresholds = createCmDiagnosticThresholds() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysesSpecifications.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create full CM analysis specifications — createCmAnalysesSpecifications","text":"cmAnalysisList list objects type cmAnalysis created using `createCmAnalysis function. targetComparatorOutcomesList list objects type targetComparatorOutcomes created using createTargetComparatorOutcomes function. analysesToExclude Analyses exclude. See Analyses Exclude section details. refitPsForEveryOutcome propensity model fitted every outcome (.e. people already outcome removed)? false, single propensity model fitted, people outcome previously removed afterwards. refitPsForEveryStudyPopulation propensity model fitted every study population definition? false, single propensity model fitted, study population criteria applied afterwards. cmDiagnosticThresholds object type CmDiagnosticThresholds created using createCmDiagnosticThresholds().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysesSpecifications.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create full CM analysis specifications — createCmAnalysesSpecifications","text":"object type CmAnalysesSpecifications.","code":""},{"path":[]},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysesSpecifications.html","id":"analyses-to-exclude","dir":"Reference","previous_headings":"","what":"Analyses to Exclude","title":"Create full CM analysis specifications — createCmAnalysesSpecifications","text":"Normally, runCmAnalyses run combinations target-comparator-outcome-analyses settings. However, sometimes may need combinations. Using analysesToExclude argument, can remove certain items full matrix. argument data frame least one following columns: targetId comparatorId nestingCohortId outcomeId analysisId data frame joined outcome model reference table executing, matching rows removed. example, one specifies one target ID analysis ID, analyses target analysis ID skipped.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a CohortMethod analysis specification — createCmAnalysis","title":"Create a CohortMethod analysis specification — createCmAnalysis","text":"Create CohortMethod analysis specification","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a CohortMethod analysis specification — createCmAnalysis","text":"","code":"createCmAnalysis(   analysisId = 1,   description = \"\",   getDbCohortMethodDataArgs,   createStudyPopulationArgs,   createPsArgs = NULL,   trimByPsArgs = NULL,   truncateIptwArgs = NULL,   matchOnPsArgs = NULL,   stratifyByPsArgs = NULL,   computeSharedCovariateBalanceArgs = NULL,   computeCovariateBalanceArgs = NULL,   fitOutcomeModelArgs = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a CohortMethod analysis specification — createCmAnalysis","text":"analysisId integer used later refer specific set analysis choices. description short description analysis. getDbCohortMethodDataArgs object representing arguments used calling getDbCohortMethodData() function. createStudyPopulationArgs object representing arguments used calling createStudyPopulation() function. createPsArgs object representing arguments used calling createPs() function. trimByPsArgs object representing arguments used calling trimByPs() function. truncateIptwArgs object representing arguments used calling truncateIptw() function. matchOnPsArgs object representing arguments used calling matchOnPs() function. stratifyByPsArgs object representing arguments used calling stratifyByPs() function. computeSharedCovariateBalanceArgs object representing arguments used calling computeCovariateBalance() function per target-comparator-analysis. computeCovariateBalanceArgs object representing arguments used calling computeCovariateBalance() function per target-comparator-outcome-analysis. fitOutcomeModelArgs object representing arguments used calling fitOutcomeModel() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a CohortMethod analysis specification — createCmAnalysis","text":"object type CmAnalysis, used runCmAnalyses function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmAnalysis.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a CohortMethod analysis specification — createCmAnalysis","text":"Create set analysis choices, used runCmAnalyses() function. Providing NULL value argument applies corresponding step executed. example, createPsArgs = NULL, propensity scores computed.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmDiagnosticThresholds.html","id":null,"dir":"Reference","previous_headings":"","what":"Create CohortMethod diagnostics thresholds — createCmDiagnosticThresholds","title":"Create CohortMethod diagnostics thresholds — createCmDiagnosticThresholds","text":"Threshold used calling exportToCsv() determine pass fail diagnostics.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmDiagnosticThresholds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create CohortMethod diagnostics thresholds — createCmDiagnosticThresholds","text":"","code":"createCmDiagnosticThresholds(   mdrrThreshold = 10,   easeThreshold = 0.25,   sdmThreshold = 0.1,   sdmAlpha = NULL,   equipoiseThreshold = 0.2,   generalizabilitySdmThreshold = 999 )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmDiagnosticThresholds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create CohortMethod diagnostics thresholds — createCmDiagnosticThresholds","text":"mdrrThreshold maximum allowed minimum detectable relative risk (MDRR)? easeThreshold maximum allowed expected absolute systematic error (EASE). sdmThreshold maximum allowed standardized difference mean (SDM)? covariate SDM exceeding threshold, diagnostic fail. sdmAlpha alpha testing whether absolute SDM exceeds sdmThreshold? provided, significance testing performed absolute SDM greater threshold considered imbalance. Note Bonferroni adjustment automatically applied adjust number tests performed. equipoiseThreshold minimum required equipoise? generalizabilitySdmThreshold maximum allowed standardized difference mean (SDM)comparing population PS adjustments? SDM greater value, diagnostic fail.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmDiagnosticThresholds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create CohortMethod diagnostics thresholds — createCmDiagnosticThresholds","text":"object type CmDiagnosticThresholds.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmDiagnosticThresholds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create CohortMethod diagnostics thresholds — createCmDiagnosticThresholds","text":"sdmThreshold sdmAlpha arguments independent threshold alpha threshold provided createComputeCovariateBalanceArgs() function. latter impact blinding diagnostics reported export.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmTable1.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a table 1 — createCmTable1","title":"Create a table 1 — createCmTable1","text":"Creates formatted table cohort characteristics, included publications reports.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmTable1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a table 1 — createCmTable1","text":"","code":"createCmTable1(   balance,   specifications = getDefaultCmTable1Specifications(),   beforeTargetPopSize = NULL,   beforeComparatorPopSize = NULL,   afterTargetPopSize = NULL,   afterComparatorPopSize = NULL,   beforeLabel = \"Before matching\",   afterLabel = \"After matching\",   targetLabel = \"Target\",   comparatorLabel = \"Comparator\",   percentDigits = 1,   stdDiffDigits = 2 )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmTable1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a table 1 — createCmTable1","text":"balance data frame created computeCovariateBalance function. specifications Specifications covariates display, . beforeTargetPopSize number people target cohort matching/stratification/trimming, mention table header. provide, number included header. beforeComparatorPopSize number people comparator cohort matching/stratification/trimming, mention table header. provide, number included header. afterTargetPopSize number people target cohort matching/stratification/trimming, mention table header. provide, number included header. afterComparatorPopSize number people comparator cohort matching/stratification/trimming, mention table header. provide, number included header. beforeLabel Label identifying columns matching / stratification / trimming. afterLabel Label identifying columns matching / stratification / trimming. targetLabel Label identifying columns target cohort. comparatorLabel Label identifying columns comparator cohort. percentDigits Number digits used percentages. stdDiffDigits Number digits used standardized differences.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCmTable1.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a table 1 — createCmTable1","text":"data frame formatted table 1.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCohortMethodDataSimulationProfile.html","id":null,"dir":"Reference","previous_headings":"","what":"Create simulation profile — createCohortMethodDataSimulationProfile","title":"Create simulation profile — createCohortMethodDataSimulationProfile","text":"Creates profile based provided CohortMethodData object, can used generate simulated data similar characteristics.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCohortMethodDataSimulationProfile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create simulation profile — createCohortMethodDataSimulationProfile","text":"","code":"createCohortMethodDataSimulationProfile(cohortMethodData, minCellCount = 5)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCohortMethodDataSimulationProfile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create simulation profile — createCohortMethodDataSimulationProfile","text":"cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). minCellCount > 0, set zero low-prevalence covariates supplied simulation table order prevent identification persons.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCohortMethodDataSimulationProfile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create simulation profile — createCohortMethodDataSimulationProfile","text":"object type CohortDataSimulationProfile.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCohortMethodDataSimulationProfile.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create simulation profile — createCohortMethodDataSimulationProfile","text":"output function object can used simulateCohortMethodData() function generate cohortMethodData object.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createComputeCovariateBalanceArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function computeCovariateBalance() — createComputeCovariateBalanceArgs","title":"Create a parameter object for the function computeCovariateBalance() — createComputeCovariateBalanceArgs","text":"Create parameter object function computeCovariateBalance()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createComputeCovariateBalanceArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function computeCovariateBalance() — createComputeCovariateBalanceArgs","text":"","code":"createComputeCovariateBalanceArgs(   subgroupCovariateId = NULL,   maxCohortSize = 250000,   covariateFilter = NULL,   threshold = 0.1,   alpha = 0.05 )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createComputeCovariateBalanceArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function computeCovariateBalance() — createComputeCovariateBalanceArgs","text":"subgroupCovariateId Optional: covariate ID binary covariate indicates subgroup interest. populations restricted subgroup computing covariate balance. maxCohortSize target comparator cohort larger number, downsampled computing covariate balance save time. Setting number 0 means downsampling applied. covariateFilter Determines covariates compute covariate balance. Either vector covariate IDs, table 1 specifications object generated example using FeatureExtraction::getDefaultTable1Specifications(). covariateFilter = NULL, balance computed variables found data. threshold Threshold value absolute value standardized difference means (ASDM). ASDM exceeds threshold marked unbalanced. (Hripcsak et al. 2025) alpha family-wise alpha testing whether absolute value standardized difference means greater threshold. provided, value greater threshold marked unbalanced.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createComputeCovariateBalanceArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function computeCovariateBalance() — createComputeCovariateBalanceArgs","text":"object type ComputeCovariateBalanceArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createComputeCovariateBalanceArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function computeCovariateBalance() — createComputeCovariateBalanceArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createComputeCovariateBalanceArgs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Create a parameter object for the function computeCovariateBalance() — createComputeCovariateBalanceArgs","text":"Hripcsak G, Zhang L, Chen Y, Li K, Suchard MA, Ryan PB, Schuemie MJ, Assessing Covariate Balance Small Sample Sizes. Statistics Medicine 44, . 18-19 (2025): e70212","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreatePsArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function createPs() — createCreatePsArgs","title":"Create a parameter object for the function createPs() — createCreatePsArgs","text":"Create parameter object function createPs()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreatePsArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function createPs() — createCreatePsArgs","text":"","code":"createCreatePsArgs(   excludeCovariateIds = c(),   includeCovariateIds = c(),   maxCohortSizeForFitting = 250000,   errorOnHighCorrelation = TRUE,   stopOnError = TRUE,   prior = createPrior(priorType = \"laplace\", exclude = c(0), useCrossValidation = TRUE),   control = createControl(noiseLevel = \"silent\", cvType = \"auto\", seed = 1,     resetCoefficients = TRUE, tolerance = 2e-07, cvRepetitions = 10, startingVariance =     0.01),   estimator = \"att\" )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreatePsArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function createPs() — createCreatePsArgs","text":"excludeCovariateIds Exclude covariates propensity model. includeCovariateIds Include covariates propensity model. maxCohortSizeForFitting target comparator cohort larger number, downsampled fitting propensity model. model used compute propensity scores subjects. purpose sampling gain speed. Setting number 0 means downsampling applied. errorOnHighCorrelation true, function test covariate correlation treatment assignment. covariate unusually high correlation (either positive negative), throw error. stopOnError error occur, function stop? Else, two cohorts assumed perfectly separable. prior prior used fit model. See Cyclops::createPrior() details. control control object used control cross-validation used determine hyperparameters prior (applicable). See Cyclops::createControl() details. estimator type estimator IPTW. Options estimator = \"ate\" average treatment effect, estimator = \"att\" average treatment effect treated, estimator = \"ato\" average treatment effect overlap population.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreatePsArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function createPs() — createCreatePsArgs","text":"object type CreatePsArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreatePsArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function createPs() — createCreatePsArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreateStudyPopulationArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function createStudyPopulation() — createCreateStudyPopulationArgs","title":"Create a parameter object for the function createStudyPopulation() — createCreateStudyPopulationArgs","text":"Create parameter object function createStudyPopulation()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreateStudyPopulationArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function createStudyPopulation() — createCreateStudyPopulationArgs","text":"","code":"createCreateStudyPopulationArgs(   removeSubjectsWithPriorOutcome = TRUE,   priorOutcomeLookback = 99999,   minDaysAtRisk = 1,   maxDaysAtRisk = 99999,   riskWindowStart = 0,   startAnchor = \"cohort start\",   riskWindowEnd = 0,   endAnchor = \"cohort end\",   censorAtNewRiskWindow = FALSE )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreateStudyPopulationArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function createStudyPopulation() — createCreateStudyPopulationArgs","text":"removeSubjectsWithPriorOutcome Remove subjects outcome prior risk window start? priorOutcomeLookback many days look back identifying prior outcomes? minDaysAtRisk minimum required number days risk. Risk windows fewer days number removed analysis. maxDaysAtRisk maximum allowed number days risk. Risk windows longer truncated number days. riskWindowStart start risk window (days) relative startAnchor. startAnchor anchor point start risk window. Can \"cohort start\" \"cohort end\". riskWindowEnd end risk window (days) relative endAnchor. endAnchor anchor point end risk window. Can \"cohort start\" \"cohort end\". censorAtNewRiskWindow subject multiple cohorts, time--risk censored new time--risk starts prevent overlap?","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreateStudyPopulationArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function createStudyPopulation() — createCreateStudyPopulationArgs","text":"object type CreateStudyPopulationArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createCreateStudyPopulationArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function createStudyPopulation() — createCreateStudyPopulationArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createDefaultMultiThreadingSettings.html","id":null,"dir":"Reference","previous_headings":"","what":"Create default CohortMethod multi-threading settings — createDefaultMultiThreadingSettings","title":"Create default CohortMethod multi-threading settings — createDefaultMultiThreadingSettings","text":"Create CohortMethod multi-threading settings based maximum number cores used.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createDefaultMultiThreadingSettings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create default CohortMethod multi-threading settings — createDefaultMultiThreadingSettings","text":"","code":"createDefaultMultiThreadingSettings(maxCores)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createDefaultMultiThreadingSettings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create default CohortMethod multi-threading settings — createDefaultMultiThreadingSettings","text":"maxCores Maximum number CPU cores use.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createDefaultMultiThreadingSettings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create default CohortMethod multi-threading settings — createDefaultMultiThreadingSettings","text":"object type CmMultiThreadingSettings.","code":""},{"path":[]},{"path":"https://ohdsi.github.io/CohortMethod/reference/createDefaultMultiThreadingSettings.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create default CohortMethod multi-threading settings — createDefaultMultiThreadingSettings","text":"","code":"settings <- createDefaultMultiThreadingSettings(10)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createFitOutcomeModelArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function fitOutcomeModel() — createFitOutcomeModelArgs","title":"Create a parameter object for the function fitOutcomeModel() — createFitOutcomeModelArgs","text":"Create parameter object function fitOutcomeModel()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createFitOutcomeModelArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function fitOutcomeModel() — createFitOutcomeModelArgs","text":"","code":"createFitOutcomeModelArgs(   modelType = \"cox\",   stratified = FALSE,   useCovariates = FALSE,   inversePtWeighting = FALSE,   bootstrapCi = FALSE,   bootstrapReplicates = 200,   interactionCovariateIds = c(),   excludeCovariateIds = c(),   includeCovariateIds = c(),   profileGrid = NULL,   profileBounds = c(log(0.1), log(10)),   prior = createPrior(priorType = \"laplace\", useCrossValidation = TRUE),   control = createControl(cvType = \"auto\", seed = 1, resetCoefficients = TRUE,     startingVariance = 0.01, tolerance = 2e-07, cvRepetitions = 10, noiseLevel = \"quiet\") )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createFitOutcomeModelArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function fitOutcomeModel() — createFitOutcomeModelArgs","text":"modelType type outcome model used. Possible values \"logistic\", \"poisson\", \"cox\". stratified regression conditioned strata defined population object (e.g. matching stratifying propensity scores)? useCovariates Whether use covariates cohortMethodData object outcome model. inversePtWeighting Use inverse probability treatment weighting (IPTW) bootstrapCi Compute confidence interval using bootstrapping instead likelihood profiling? bootstrapReplicates using bootstrapping compute confidence intervals, many replicates sampled? interactionCovariateIds optional vector covariate IDs use estimate interactions main treatment effect. excludeCovariateIds Exclude covariates outcome model. includeCovariateIds Include covariates outcome model. profileGrid one-dimensional grid points log(relative risk) scale likelihood coefficient variables sampled. See details. profileBounds bounds (log relative risk scale) adaptive sampling likelihood function. See details. prior prior used fit model. See Cyclops::createPrior() details. prior applied non-treatment variables, used useCovariates = FALSE. control control object used control cross-validation used determine hyperparameters prior (applicable). See Cyclops::createControl() details.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createFitOutcomeModelArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function fitOutcomeModel() — createFitOutcomeModelArgs","text":"object type ComputeCovariateBalanceArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createFitOutcomeModelArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function fitOutcomeModel() — createFitOutcomeModelArgs","text":"Create object defining parameter values. likelihood profiling, either specify profileGrid completely user- defined grid, profileBounds adaptive grid. defined log effect size scale. profileGrid profileGrid NULL likelihood profiling disabled.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createGetDbCohortMethodDataArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function getDbCohortMethodData() — createGetDbCohortMethodDataArgs","title":"Create a parameter object for the function getDbCohortMethodData() — createGetDbCohortMethodDataArgs","text":"Create parameter object function getDbCohortMethodData()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createGetDbCohortMethodDataArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function getDbCohortMethodData() — createGetDbCohortMethodDataArgs","text":"","code":"createGetDbCohortMethodDataArgs(   removeDuplicateSubjects = \"keep first, truncate to second\",   firstExposureOnly = TRUE,   washoutPeriod = 365,   nestingCohortId = NULL,   restrictToCommonPeriod = TRUE,   studyStartDate = \"\",   studyEndDate = \"\",   maxCohortSize = 0,   covariateSettings )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createGetDbCohortMethodDataArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function getDbCohortMethodData() — createGetDbCohortMethodDataArgs","text":"removeDuplicateSubjects Remove subjects target comparator cohort? See details allowed values.Note typically done createStudyPopulation function, can already done efficiency reasons. firstExposureOnly first exposure per subject included? Note typically done createStudyPopulation() function, can already done efficiency reasons. washoutPeriod minimum required continuous observation time prior index date person included cohort. Note typically done createStudyPopulation function, can already done efficiency reasons. nestingCohortId cohort definition ID identifying records nestingCohortTable use nesting cohort. restrictToCommonPeriod Restrict analysis period treatments observed? studyStartDate calendar date specifying minimum date cohort index date can appear. Date format 'yyyymmdd'. studyEndDate calendar date specifying maximum date cohort index date can appear. Date format 'yyyymmdd'. Important: study end data also used truncate risk windows, meaning outcomes beyond study end date considered. maxCohortSize either target comparator cohort larger number sampled size. maxCohortSize = 0 indicates maximum size. covariateSettings object type covariateSettings created using FeatureExtraction::createCovariateSettings() function, list covariate settings objects.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createGetDbCohortMethodDataArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function getDbCohortMethodData() — createGetDbCohortMethodDataArgs","text":"object type GetDbCohortMethodDataArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createGetDbCohortMethodDataArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function getDbCohortMethodData() — createGetDbCohortMethodDataArgs","text":"Create object defining parameter values. removeduplicateSubjects argument can one following values: \"keep first, truncate second\": subjects appear target comparator cohort, keep whichever cohort first time. cohort starts first ended, first cohort truncated stop day second starts. cohorts start simultaneous, person removed analysis. \"keep first\": subjects appear target comparator cohort, keep whichever cohort first time. cohorts start simultaneous, person removed analysis. \"remove \": Remove subjects appear target comparator cohort completely analysis.\" \"keep \": remove subjects appear target comparator cohort","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsAndCovariatesArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function matchOnPsAndCovariates — createMatchOnPsAndCovariatesArgs","title":"Create a parameter object for the function matchOnPsAndCovariates — createMatchOnPsAndCovariatesArgs","text":"Create parameter object function matchOnPsAndCovariates","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsAndCovariatesArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function matchOnPsAndCovariates — createMatchOnPsAndCovariatesArgs","text":"","code":"createMatchOnPsAndCovariatesArgs(   caliper = 0.2,   caliperScale = \"standardized logit\",   maxRatio = 1,   allowReverseMatch = FALSE,   covariateIds )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsAndCovariatesArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function matchOnPsAndCovariates — createMatchOnPsAndCovariatesArgs","text":"caliper caliper matching. caliper distance acceptable match. Observations outside caliper dropped. caliper 0 means caliper used. caliperScale scale caliper defined. Three scales supported: caliperScale = 'propensity score', caliperScale = 'standardized', caliperScale = 'standardized logit'. standardized scale, caliper interpreted standard deviations propensity score distribution. 'standardized logit' similar, except propensity score transformed logit scale PS likely normally distributed scale (Austin, 2011). maxRatio maximum number persons comparator arm matched person treatment arm. maxRatio 0 means maximum: comparators assigned target person. allowReverseMatch Allows n--1 matching target arm larger covariateIds One covariate IDs cohortMethodData object subjects also matched.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsAndCovariatesArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function matchOnPsAndCovariates — createMatchOnPsAndCovariatesArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function matchOnPs() — createMatchOnPsArgs","title":"Create a parameter object for the function matchOnPs() — createMatchOnPsArgs","text":"Create parameter object function matchOnPs()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function matchOnPs() — createMatchOnPsArgs","text":"","code":"createMatchOnPsArgs(   caliper = 0.2,   caliperScale = \"standardized logit\",   maxRatio = 1,   allowReverseMatch = FALSE,   matchColumns = c(),   matchCovariateIds = c() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function matchOnPs() — createMatchOnPsArgs","text":"caliper caliper matching. caliper distance acceptable match. Observations outside caliper dropped. caliper 0 means caliper used. caliperScale scale caliper defined. Three scales supported: caliperScale = 'propensity score', caliperScale = 'standardized', caliperScale = 'standardized logit'. standardized scale, caliper interpreted standard deviations propensity score distribution. 'standardized logit' similar, except propensity score transformed logit scale PS likely normally distributed scale (Austin, 2011). maxRatio maximum number persons comparator arm matched person treatment arm. maxRatio 0 means maximum: comparators assigned target person. allowReverseMatch Allows n--1 matching target arm larger matchColumns Names numbers one columns data data.frame subjects stratified prior matching. persons matched persons outside strata identified values columns. matchCovariateIds One covariate IDs cohortMethodData object subjects also matched.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function matchOnPs() — createMatchOnPsArgs","text":"object type MatchOnPsArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function matchOnPs() — createMatchOnPsArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMatchOnPsArgs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Create a parameter object for the function matchOnPs() — createMatchOnPsArgs","text":"Austin, PC. (2011) Optimal caliper widths propensity-score matching estimating differences means differences proportions observational studies, Pharmaceutical statistics, March, 10(2):150-161.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMultiThreadingSettings.html","id":null,"dir":"Reference","previous_headings":"","what":"Create CohortMethod multi-threading settings — createMultiThreadingSettings","title":"Create CohortMethod multi-threading settings — createMultiThreadingSettings","text":"Create CohortMethod multi-threading settings","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMultiThreadingSettings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create CohortMethod multi-threading settings — createMultiThreadingSettings","text":"","code":"createMultiThreadingSettings(   getDbCohortMethodDataThreads = 1,   createPsThreads = 1,   psCvThreads = 1,   createStudyPopThreads = 1,   trimMatchStratifyThreads = 1,   computeSharedBalanceThreads = 1,   computeBalanceThreads = 1,   prefilterCovariatesThreads = 1,   fitOutcomeModelThreads = 1,   outcomeCvThreads = 1,   calibrationThreads = 1 )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMultiThreadingSettings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create CohortMethod multi-threading settings — createMultiThreadingSettings","text":"getDbCohortMethodDataThreads number parallel threads use building cohortMethod data objects. createPsThreads number parallel threads use fitting propensity models. psCvThreads number parallel threads use cross- validation estimating hyperparameter propensity model. Note total number CV threads one time createPsThreads * psCvThreads. createStudyPopThreads number parallel threads use creating study population. trimMatchStratifyThreads number parallel threads use trimming, matching stratifying. computeSharedBalanceThreads number parallel threads use computing shared covariate balance. computeBalanceThreads number parallel threads use computing covariate balance. prefilterCovariatesThreads number parallel threads use prefiltering covariates. fitOutcomeModelThreads number parallel threads use fitting outcome models. outcomeCvThreads number parallel threads use cross- validation estimating hyperparameter outcome model. Note total number CV threads one time fitOutcomeModelThreads * outcomeCvThreads. calibrationThreads number parallel threads use empirical calibration.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createMultiThreadingSettings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create CohortMethod multi-threading settings — createMultiThreadingSettings","text":"object type CmMultiThreadingSettings.","code":""},{"path":[]},{"path":"https://ohdsi.github.io/CohortMethod/reference/createOutcome.html","id":null,"dir":"Reference","previous_headings":"","what":"Create outcome definition — createOutcome","title":"Create outcome definition — createOutcome","text":"Create outcome definition","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createOutcome.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create outcome definition — createOutcome","text":"","code":"createOutcome(   outcomeId,   outcomeOfInterest = TRUE,   trueEffectSize = NA,   priorOutcomeLookback = NULL,   riskWindowStart = NULL,   startAnchor = NULL,   riskWindowEnd = NULL,   endAnchor = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createOutcome.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create outcome definition — createOutcome","text":"outcomeId integer used identify outcome outcome cohort table. outcomeOfInterest outcome interest? , creation non-essential files skipped, including outcome=specific covariate balance files. helpful speed analyses many controls, interested effect size estimate. trueEffectSize negative positive controls: known true effect size. used empirical calibration. Negative controls trueEffectSize = 1. true effect size unknown, use trueEffectSize = NA priorOutcomeLookback many days look back identifying prior. outcomes? riskWindowStart start risk window (days) relative startAnchor. startAnchor anchor point start risk window. Can \"cohort start\" \"cohort end\". riskWindowEnd end risk window (days) relative endAnchor. endAnchor anchor point end risk window. Can \"cohort start\" \"cohort end\".","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createOutcome.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create outcome definition — createOutcome","text":"object type Outcome, used createTargetComparatorOutcomes().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createOutcome.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create outcome definition — createOutcome","text":"settings NULL override values set createCreateStudyPopulationArgs().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createPs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create propensity scores — createPs","title":"Create propensity scores — createPs","text":"Creates propensity scores inverse probability treatment weights (IPTW) using regularized logistic regression.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createPs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create propensity scores — createPs","text":"","code":"createPs(   cohortMethodData,   population = NULL,   createPsArgs = createCreatePsArgs() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createPs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create propensity scores — createPs","text":"cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). population data frame describing population. least rowId column corresponding rowId column CohortMethodData covariates object treatment column. population specified, full population CohortMethodData used. createPsArgs object type CreatePsArgs created createCreatePsArgs() function","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createPs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create propensity scores — createPs","text":"IPTW estimates either average treatment effect (ate) average treatment effect treated (att) using stabilized inverse propensity scores (Xu et al. 2010).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createPs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Create propensity scores — createPs","text":"Xu S, Ross C, Raebel MA, Shetterly S, Blanchette C, Smith D. Use stabilized inverse propensity scores weights directly estimate relative risk confidence intervals. Value Health. 2010;13(2):273-277. doi:10.1111/j.1524-4733.2009.00671.x","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createPs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create propensity scores — createPs","text":"","code":"data(cohortMethodDataSimulationProfile) cohortMethodData <- simulateCohortMethodData(cohortMethodDataSimulationProfile, n = 1000) #> Generating covariates #> Generating treatment variable #> Generating cohorts #> Generating outcomes after index date #> Generating outcomes before index date ps <- createPs(cohortMethodData, createPsArgs = createCreatePsArgs()) #> Removing 1 redundant covariates #> Removing 0 infrequent covariates #> Normalizing covariates #> Tidying covariates took 4.55 secs #> Propensity model fitting finished with status OK #> Creating propensity scores took 14.4 secs"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createResultsDataModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Create the results data model tables on a database server. — createResultsDataModel","title":"Create the results data model tables on a database server. — createResultsDataModel","text":"Create results data model tables database server.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createResultsDataModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create the results data model tables on a database server. — createResultsDataModel","text":"","code":"createResultsDataModel(   connectionDetails = NULL,   databaseSchema,   tablePrefix = \"\" )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createResultsDataModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create the results data model tables on a database server. — createResultsDataModel","text":"connectionDetails DatabaseConnector connectionDetails instance @seealsoDatabaseConnector::createConnectionDetails databaseSchema schema server tables created. tablePrefix (Optional)  string insert table names database table names","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createResultsDataModel.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create the results data model tables on a database server. — createResultsDataModel","text":"PostgreSQL SQLite servers supported.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsAndCovariatesArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function stratifyByPsAndCovariates — createStratifyByPsAndCovariatesArgs","title":"Create a parameter object for the function stratifyByPsAndCovariates — createStratifyByPsAndCovariatesArgs","text":"Create parameter object function stratifyByPsAndCovariates","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsAndCovariatesArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function stratifyByPsAndCovariates — createStratifyByPsAndCovariatesArgs","text":"","code":"createStratifyByPsAndCovariatesArgs(   numberOfStrata = 5,   baseSelection = \"all\",   covariateIds )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsAndCovariatesArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function stratifyByPsAndCovariates — createStratifyByPsAndCovariatesArgs","text":"numberOfStrata many strata propensity score divided? boundaries strata automatically defined contain equal numbers target persons. baseSelection base selection subjects strata bounds determined? Strata defined equally-sized strata inside selection. Possible values \"\", \"target\", \"comparator\". covariateIds One covariate IDs cohortMethodData object subjects also stratified.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsAndCovariatesArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function stratifyByPsAndCovariates — createStratifyByPsAndCovariatesArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function stratifyByPs() — createStratifyByPsArgs","title":"Create a parameter object for the function stratifyByPs() — createStratifyByPsArgs","text":"Create parameter object function stratifyByPs()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function stratifyByPs() — createStratifyByPsArgs","text":"","code":"createStratifyByPsArgs(   numberOfStrata = 10,   baseSelection = \"all\",   stratificationColumns = c(),   stratificationCovariateIds = c() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function stratifyByPs() — createStratifyByPsArgs","text":"numberOfStrata many strata? boundaries strata automatically defined contain equal numbers target persons. baseSelection base selection subjects strata bounds determined? Strata defined equally-sized strata inside selection. Possible values \"\", \"target\", \"comparator\". stratificationColumns Names numbers one columns data data.frame subjects stratified prior matching. persons matched persons outside strata identified values columns. stratificationCovariateIds One covariate IDs cohortMethodData object subjects also stratified.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function stratifyByPs() — createStratifyByPsArgs","text":"object type StratifyByPsArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStratifyByPsArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function stratifyByPs() — createStratifyByPsArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStudyPopulation.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a study population — createStudyPopulation","title":"Create a study population — createStudyPopulation","text":"Create study population","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStudyPopulation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a study population — createStudyPopulation","text":"","code":"createStudyPopulation(   cohortMethodData,   population = NULL,   outcomeId = NULL,   createStudyPopulationArgs = createCreateStudyPopulationArgs() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStudyPopulation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a study population — createStudyPopulation","text":"cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). population specified, population used starting point instead cohorts cohortMethodData object. outcomeId ID outcome. NULL, outcome-specific transformations performed. createStudyPopulationArgs object type CreateStudyPopulationArgs created createCreateStudyPopulationArgs() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStudyPopulation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a study population — createStudyPopulation","text":"tibble specifying study population. tibble following columns: rowId: unique identifier exposure. personSeqId: person sequence ID subject. cohortStartdate: index date. outcomeCount number outcomes observed risk window. timeAtRisk: number days risk window. survivalTime: number days either outcome end risk window.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createStudyPopulation.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a study population — createStudyPopulation","text":"Create study population enforcing certain inclusion exclusion criteria, defining risk window, determining outcomes fall inside risk window.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTargetComparatorOutcomes.html","id":null,"dir":"Reference","previous_headings":"","what":"Create target-comparator-outcomes combinations. — createTargetComparatorOutcomes","title":"Create target-comparator-outcomes combinations. — createTargetComparatorOutcomes","text":"Create target-comparator-outcomes combinations.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTargetComparatorOutcomes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create target-comparator-outcomes combinations. — createTargetComparatorOutcomes","text":"","code":"createTargetComparatorOutcomes(   targetId,   comparatorId,   outcomes,   nestingCohortId = NULL,   excludedCovariateConceptIds = c(),   includedCovariateConceptIds = c() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTargetComparatorOutcomes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create target-comparator-outcomes combinations. — createTargetComparatorOutcomes","text":"targetId cohort ID identifying target exposure exposure table. comparatorId cohort ID identifying comparator exposure exposure table. outcomes list object type Outcome created createOutcome(). nestingCohortId (Optional) nesting cohort ID. provided, override nesting cohort ID used createGetDbCohortMethodDataArgs(). excludedCovariateConceptIds list concept IDs used construct covariates. argument used exclusion concepts specific target-comparator combination. includedCovariateConceptIds list concept IDs must used construct covariates. argument used inclusion concepts specific target-comparator combination.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTargetComparatorOutcomes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create target-comparator-outcomes combinations. — createTargetComparatorOutcomes","text":"object type TargetComparatorOutcomes.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTargetComparatorOutcomes.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create target-comparator-outcomes combinations. — createTargetComparatorOutcomes","text":"Create set hypotheses interest, used runCmAnalyses() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByIptwArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function trimByIptw — createTrimByIptwArgs","title":"Create a parameter object for the function trimByIptw — createTrimByIptwArgs","text":"Create parameter object function trimByIptw","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByIptwArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function trimByIptw — createTrimByIptwArgs","text":"","code":"createTrimByIptwArgs(maxWeight = 10)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByIptwArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function trimByIptw — createTrimByIptwArgs","text":"maxWeight maximum allowed IPTW.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByIptwArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function trimByIptw — createTrimByIptwArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function trimByPs() — createTrimByPsArgs","title":"Create a parameter object for the function trimByPs() — createTrimByPsArgs","text":"Create parameter object function trimByPs()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function trimByPs() — createTrimByPsArgs","text":"","code":"createTrimByPsArgs(   trimFraction = NULL,   equipoiseBounds = NULL,   maxWeight = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function trimByPs() — createTrimByPsArgs","text":"trimFraction fraction removed treatment group. target group, persons highest propensity scores removed, comparator group person lowest scores removed. equipoiseBounds 2-dimensional numeric vector containing upper lower bound preference score (Walker, 201) keeping persons. maxWeight maximum allowed IPTW.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function trimByPs() — createTrimByPsArgs","text":"object type TrimByPsArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function trimByPs() — createTrimByPsArgs","text":"Create object defining parameter values. Set argument NULL use trimming.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsArgs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Create a parameter object for the function trimByPs() — createTrimByPsArgs","text":"Walker , Patrick AR, Lauer MS, Hornbrook MC, Marin MG, Platt R, Roger VL, Stang P, Schneeweiss S. (2013) tool assessing feasibility comparative effectiveness research, Comparative Effective Research, 3, 11-20","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsToEquipoiseArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function trimByPsToEquipoise — createTrimByPsToEquipoiseArgs","title":"Create a parameter object for the function trimByPsToEquipoise — createTrimByPsToEquipoiseArgs","text":"Create parameter object function trimByPsToEquipoise","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsToEquipoiseArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function trimByPsToEquipoise — createTrimByPsToEquipoiseArgs","text":"","code":"createTrimByPsToEquipoiseArgs(bounds = c(0.3, 0.7))"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsToEquipoiseArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function trimByPsToEquipoise — createTrimByPsToEquipoiseArgs","text":"bounds upper lower bound preference score keeping persons.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTrimByPsToEquipoiseArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function trimByPsToEquipoise — createTrimByPsToEquipoiseArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTruncateIptwArgs.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a parameter object for the function truncateIptw() — createTruncateIptwArgs","title":"Create a parameter object for the function truncateIptw() — createTruncateIptwArgs","text":"Create parameter object function truncateIptw()","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTruncateIptwArgs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a parameter object for the function truncateIptw() — createTruncateIptwArgs","text":"","code":"createTruncateIptwArgs(maxWeight = 10)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTruncateIptwArgs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a parameter object for the function truncateIptw() — createTruncateIptwArgs","text":"maxWeight maximum allowed IPTW.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTruncateIptwArgs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a parameter object for the function truncateIptw() — createTruncateIptwArgs","text":"object type TruncateIptwArgs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/createTruncateIptwArgs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a parameter object for the function truncateIptw() — createTruncateIptwArgs","text":"Create object defining parameter values.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/drawAttritionDiagram.html","id":null,"dir":"Reference","previous_headings":"","what":"Draw the attrition diagram — drawAttritionDiagram","title":"Draw the attrition diagram — drawAttritionDiagram","text":"drawAttritionDiagram draws attrition diagram, showing many people excluded study population, reasons.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/drawAttritionDiagram.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Draw the attrition diagram — drawAttritionDiagram","text":"","code":"drawAttritionDiagram(   object,   targetLabel = \"Target\",   comparatorLabel = \"Comparator\",   fileName = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/drawAttritionDiagram.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Draw the attrition diagram — drawAttritionDiagram","text":"object Either object type cohortMethodData, population object generated functions like createStudyPopulation, object type outcomeModel. targetLabel label us target cohort. comparatorLabel label us comparator cohort. fileName Name file plot saved, example 'plot.png'. See function ggsave ggplot2 package supported file formats.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/drawAttritionDiagram.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Draw the attrition diagram — drawAttritionDiagram","text":"ggplot object. Use ggsave function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/exportToCsv.html","id":null,"dir":"Reference","previous_headings":"","what":"Export cohort method results to CSV files — exportToCsv","title":"Export cohort method results to CSV files — exportToCsv","text":"Export cohort method results CSV files","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/exportToCsv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export cohort method results to CSV files — exportToCsv","text":"","code":"exportToCsv(   outputFolder,   exportFolder = file.path(outputFolder, \"export\"),   databaseId,   minCellCount = 5,   maxCores = 1 )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/exportToCsv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export cohort method results to CSV files — exportToCsv","text":"outputFolder folder runCmAnalyses() generated results. exportFolder folder CSV files written. databaseId unique ID database. appended tables. minCellCount preserve privacy: minimum number subjects contributing count can included results. count threshold, set -minCellCount. maxCores many parallel cores used?","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/exportToCsv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export cohort method results to CSV files — exportToCsv","text":"return anything. called side-effect populating exportFolder CSV files.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/exportToCsv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Export cohort method results to CSV files — exportToCsv","text":"requires runCmAnalyses() executed first. exports results outputFolder CSV files sharing sites.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/fitOutcomeModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an outcome model, and compute the relative risk — fitOutcomeModel","title":"Create an outcome model, and compute the relative risk — fitOutcomeModel","text":"Create outcome model, computes relative risk","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/fitOutcomeModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an outcome model, and compute the relative risk — fitOutcomeModel","text":"","code":"fitOutcomeModel(   population,   cohortMethodData = NULL,   fitOutcomeModelArgs = createFitOutcomeModelArgs() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/fitOutcomeModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an outcome model, and compute the relative risk — fitOutcomeModel","text":"population population object generated createStudyPopulation(), potentially filtered functions. cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). Can omitted using covariates using interaction terms. fitOutcomeModelArgs object type FitOutcomeModelArgs generated using createFitOutcomeModelArgs() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/fitOutcomeModel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an outcome model, and compute the relative risk — fitOutcomeModel","text":"object class OutcomeModel. Generic function print, coef, confint available.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/fitOutcomeModel.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create an outcome model, and compute the relative risk — fitOutcomeModel","text":"likelihood profiling, either specify profileGrid completely user- defined grid, profileBounds adaptive grid. defined log effect size scale. profileGrid profileGrid NULL likelihood profiling disabled.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getAttritionTable.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the attrition table for a population — getAttritionTable","title":"Get the attrition table for a population — getAttritionTable","text":"Get attrition table population","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getAttritionTable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the attrition table for a population — getAttritionTable","text":"","code":"getAttritionTable(object)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getAttritionTable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the attrition table for a population — getAttritionTable","text":"object Either object type CohortMethodData, population object generated functions like createStudyPopulation(), object type outcomeModel.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getAttritionTable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the attrition table for a population — getAttritionTable","text":"tibble specifying number people exposures population specific steps filtering.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDataMigrator.html","id":null,"dir":"Reference","previous_headings":"","what":"Get database migrations instance — getDataMigrator","title":"Get database migrations instance — getDataMigrator","text":"Returns ResultModelManager DataMigrationsManager instance.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDataMigrator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get database migrations instance — getDataMigrator","text":"","code":"getDataMigrator(connectionDetails, databaseSchema, tablePrefix = \"\")"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDataMigrator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get database migrations instance — getDataMigrator","text":"connectionDetails DatabaseConnector connection details object databaseSchema String schema database schema lives tablePrefix (Optional) Use table prefix used table names (e.g. \"cd_\")","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDataMigrator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get database migrations instance — getDataMigrator","text":"Instance ResultModelManager::DataMigrationManager interface converting existing data models","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDbCohortMethodData.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the cohort data from the server — getDbCohortMethodData","title":"Get the cohort data from the server — getDbCohortMethodData","text":"function executes large set SQL statements database OMOP CDM format extract data needed perform analysis.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDbCohortMethodData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the cohort data from the server — getDbCohortMethodData","text":"","code":"getDbCohortMethodData(   connectionDetails,   cdmDatabaseSchema,   tempEmulationSchema = getOption(\"sqlRenderTempEmulationSchema\"),   targetId,   comparatorId,   outcomeIds,   exposureDatabaseSchema = cdmDatabaseSchema,   exposureTable = \"drug_era\",   outcomeDatabaseSchema = cdmDatabaseSchema,   outcomeTable = \"condition_occurrence\",   nestingCohortDatabaseSchema = cdmDatabaseSchema,   nestingCohortTable = \"cohort\",   getDbCohortMethodDataArgs = createGetDbCohortMethodDataArgs() )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDbCohortMethodData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the cohort data from the server — getDbCohortMethodData","text":"connectionDetails R object type connectionDetails created using DatabaseConnector::createConnectionDetails() function. cdmDatabaseSchema name database schema contains OMOP CDM instance. Requires read permissions database. SQL Server, specify database schema, example 'cdm_instance.dbo'. tempEmulationSchema database platforms like Oracle Impala truly support temp tables. emulate temp tables, provide schema write privileges temp tables can created. targetId unique identifier define target cohort.  exposureTable = DRUG_ERA, targetId concept ID descendant concepts within concept ID used define cohort.  exposureTable <> DRUG_ERA, targetId used select COHORT_DEFINITION_ID cohort-like table. comparatorId unique identifier define comparator cohort.  exposureTable = DRUG_ERA, comparatorId concept ID descendant concepts within concept ID used define cohort.  exposureTable <> DRUG_ERA, comparatorId used select COHORT_DEFINITION_ID cohort-like table. outcomeIds list cohort IDs used define outcomes. exposureDatabaseSchema name database schema location exposure data used define exposure cohorts available. exposureTable tablename contains exposure cohorts. exposureTable <> DRUG_ERA, expectation exposureTable format COHORT table: COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE, COHORT_END_DATE. outcomeDatabaseSchema name database schema location data used define outcome cohorts available. outcomeTable tablename contains outcome cohorts.  outcomeTable <> CONDITION_OCCURRENCE, expectation outcomeTable format COHORT table: COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE, COHORT_END_DATE. nestingCohortDatabaseSchema name database schema location data used define nesting cohorts available. nestingCohortTable tablename contains nesting cohorts. Must format COHORT table: COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE, COHORT_END_DATE. getDbCohortMethodDataArgs object type GetDbCohortMethodDataArgs created createGetDbCohortMethodDataArgs() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDbCohortMethodData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the cohort data from the server — getDbCohortMethodData","text":"CohortMethodData object.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDbCohortMethodData.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get the cohort data from the server — getDbCohortMethodData","text":"Based arguments, treatment comparator cohorts retrieved, well outcomes occurring exposed subjects. treatment comparator cohorts can identified using DRUG_ERA table, user-defined cohorts cohort table either inside CDM schema separate schema. Similarly, outcomes identified using CONDITION_ERA table user-defined cohorts cohort table either inside CDM schema separate schema. Optionally, target comparator cohorts can restricted within nesting cohort, can reside  different database schema table.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDefaultCmTable1Specifications.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the default table 1 specifications — getDefaultCmTable1Specifications","title":"Get the default table 1 specifications — getDefaultCmTable1Specifications","text":"Loads default specifications table 1, used createCmTable1 function. Important: currently works binary covariates.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDefaultCmTable1Specifications.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the default table 1 specifications — getDefaultCmTable1Specifications","text":"","code":"getDefaultCmTable1Specifications()"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDefaultCmTable1Specifications.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the default table 1 specifications — getDefaultCmTable1Specifications","text":"specifications objects.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDiagnosticsSummary.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a summary report of the analyses diagnostics — getDiagnosticsSummary","title":"Get a summary report of the analyses diagnostics — getDiagnosticsSummary","text":"Get summary report analyses diagnostics","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDiagnosticsSummary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a summary report of the analyses diagnostics — getDiagnosticsSummary","text":"","code":"getDiagnosticsSummary(outputFolder)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDiagnosticsSummary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a summary report of the analyses diagnostics — getDiagnosticsSummary","text":"outputFolder Name folder outputs written .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getDiagnosticsSummary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a summary report of the analyses diagnostics — getDiagnosticsSummary","text":"tibble containing summary diagnostics outcome-covariate-analysis combination.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFileReference.html","id":null,"dir":"Reference","previous_headings":"","what":"Get file reference — getFileReference","title":"Get file reference — getFileReference","text":"Get file reference","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFileReference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get file reference — getFileReference","text":"","code":"getFileReference(outputFolder)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFileReference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get file reference — getFileReference","text":"outputFolder Name folder outputs written .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFileReference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get file reference — getFileReference","text":"tibble containing file names artifacts generated target-comparator-outcome-analysis combination.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFollowUpDistribution.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the distribution of follow-up time — getFollowUpDistribution","title":"Get the distribution of follow-up time — getFollowUpDistribution","text":"Get distribution follow-time","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFollowUpDistribution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the distribution of follow-up time — getFollowUpDistribution","text":"","code":"getFollowUpDistribution(population, quantiles = c(0, 0.25, 0.5, 0.75, 1))"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFollowUpDistribution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the distribution of follow-up time — getFollowUpDistribution","text":"population data frame describing study population created using createStudyPopulation function. least columns: treatment, timeAtRisk. quantiles quantiles population compute minimum follow-time .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFollowUpDistribution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the distribution of follow-up time — getFollowUpDistribution","text":"data frame per treatment group quantile amount follow-time available.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getFollowUpDistribution.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get the distribution of follow-up time — getFollowUpDistribution","text":"Get distribution follow-time quantiles. Follow-time defined time--risk, censored outcome.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getGeneralizabilityTable.html","id":null,"dir":"Reference","previous_headings":"","what":"Get information on generalizability — getGeneralizabilityTable","title":"Get information on generalizability — getGeneralizabilityTable","text":"assess generalizability compare distribution covariates (propensity score) adjustments. compute standardized difference mean metric generalizability. (Lipton et al., 2017) Depending target estimand, need consider different base population generalizability. example, aim estimate average treatment effect treated (ATT), base population target population, meaning consider covariate distribution PS adjustment target population . default function attempt select right base population based operations performed population. example, PS matching performed assume target estimand ATT, target population selected base. Requires running computeCovariateBalance()` first.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getGeneralizabilityTable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get information on generalizability — getGeneralizabilityTable","text":"","code":"getGeneralizabilityTable(balance, baseSelection = \"auto\")"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getGeneralizabilityTable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get information on generalizability — getGeneralizabilityTable","text":"balance data frame created computeCovariateBalance function. baseSelection selection population consider generalizability. Options \"auto\", \"target\", \"comparator\", \"\". \"auto\" option attempt use balance meta-data pick appropriate population based target estimator.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getGeneralizabilityTable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get information on generalizability — getGeneralizabilityTable","text":"tibble following columns: covariateId: ID covariate. Can linked covariates covariateRef tables CohortMethodData object. covariateName: name covariate. beforeMatchingMean: mean covariate value (propensity score) adjustment. afterMatchingMean: mean covariate value (propensity score) adjustment. stdDiff: standardized difference means adjustment. tibble also 'baseSelection' attribute, documenting base population used assess generalizability.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getGeneralizabilityTable.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Get information on generalizability — getGeneralizabilityTable","text":"Tipton E, Hallberg K, Hedges LV, Chan W (2017) Implications Small Samples Generalization: Adjustments Rules Thumb, Eval Rev. Oct;41(5):472-505.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getInteractionResultsSummary.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a summary report of the analyses results — getInteractionResultsSummary","title":"Get a summary report of the analyses results — getInteractionResultsSummary","text":"Get summary report analyses results","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getInteractionResultsSummary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a summary report of the analyses results — getInteractionResultsSummary","text":"","code":"getInteractionResultsSummary(outputFolder)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getInteractionResultsSummary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a summary report of the analyses results — getInteractionResultsSummary","text":"outputFolder Name folder outputs written .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getInteractionResultsSummary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a summary report of the analyses results — getInteractionResultsSummary","text":"tibble containing summary statistics target-comparator-outcome-analysis combination.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getOutcomeModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the outcome model — getOutcomeModel","title":"Get the outcome model — getOutcomeModel","text":"Get full outcome model, showing betas variables included outcome model, just treatment variable.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getOutcomeModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the outcome model — getOutcomeModel","text":"","code":"getOutcomeModel(outcomeModel, cohortMethodData)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getOutcomeModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the outcome model — getOutcomeModel","text":"outcomeModel object type OutcomeModel generated using fitOutcomeModel() function. cohortMethodData object type CohortMethodData generated using getDbCohortMethodData().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getOutcomeModel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the outcome model — getOutcomeModel","text":"tibble.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getPsModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the propensity model — getPsModel","title":"Get the propensity model — getPsModel","text":"Returns coefficients names covariates non-zero coefficients.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getPsModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the propensity model — getPsModel","text":"","code":"getPsModel(propensityScore, cohortMethodData)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getPsModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the propensity model — getPsModel","text":"propensityScore propensity scores generated using createPs() function. cohortMethodData object type CohortMethodData generated using getDbCohortMethodData().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getPsModel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the propensity model — getPsModel","text":"tibble.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getResultsDataModelSpecifications.html","id":null,"dir":"Reference","previous_headings":"","what":"Get specifications for CohortMethod results data model — getResultsDataModelSpecifications","title":"Get specifications for CohortMethod results data model — getResultsDataModelSpecifications","text":"Get specifications CohortMethod results data model","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getResultsDataModelSpecifications.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get specifications for CohortMethod results data model — getResultsDataModelSpecifications","text":"","code":"getResultsDataModelSpecifications()"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getResultsDataModelSpecifications.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get specifications for CohortMethod results data model — getResultsDataModelSpecifications","text":"tibble data frame object specifications","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getResultsSummary.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a summary report of the analyses results — getResultsSummary","title":"Get a summary report of the analyses results — getResultsSummary","text":"Get summary report analyses results","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getResultsSummary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a summary report of the analyses results — getResultsSummary","text":"","code":"getResultsSummary(outputFolder)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/getResultsSummary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a summary report of the analyses results — getResultsSummary","text":"outputFolder Name folder outputs written .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/getResultsSummary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a summary report of the analyses results — getResultsSummary","text":"tibble containing summary statistics target-comparator-outcome-analysis combination.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/insertExportedResultsInSqlite.html","id":null,"dir":"Reference","previous_headings":"","what":"Insert exported results into a SQLite database — insertExportedResultsInSqlite","title":"Insert exported results into a SQLite database — insertExportedResultsInSqlite","text":"Insert exported results SQLite database","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/insertExportedResultsInSqlite.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Insert exported results into a SQLite database — insertExportedResultsInSqlite","text":"","code":"insertExportedResultsInSqlite(sqliteFileName, exportFolder, cohorts)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/insertExportedResultsInSqlite.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Insert exported results into a SQLite database — insertExportedResultsInSqlite","text":"sqliteFileName name SQLite file store results . file exist created. exportFolder folder containing CSV files upload, generated using exportToCsv() function. cohorts data frame describing cohorts used study. include target, comparator, outcome interest cohorts. data frame least cohortDefinitionId cohortName columns.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/insertExportedResultsInSqlite.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Insert exported results into a SQLite database — insertExportedResultsInSqlite","text":"return anything. Called side effect inserting data SQLite database.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/isCohortMethodData.html","id":null,"dir":"Reference","previous_headings":"","what":"Check whether an object is a CohortMethodData object — isCohortMethodData","title":"Check whether an object is a CohortMethodData object — isCohortMethodData","text":"Check whether object CohortMethodData object","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/isCohortMethodData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check whether an object is a CohortMethodData object — isCohortMethodData","text":"","code":"isCohortMethodData(x)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/isCohortMethodData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check whether an object is a CohortMethodData object — isCohortMethodData","text":"x object check.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/isCohortMethodData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check whether an object is a CohortMethodData object — isCohortMethodData","text":"logical value.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewer.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch Shiny app using — launchResultsViewer","title":"Launch Shiny app using — launchResultsViewer","text":"Launch Shiny app using","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch Shiny app using — launchResultsViewer","text":"","code":"launchResultsViewer(connectionDetails, databaseSchema)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch Shiny app using — launchResultsViewer","text":"connectionDetails R object type connectionDetails created using DatabaseConnector::createConnectionDetails() function. databaseSchema name database schema results written using uploadResults().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch Shiny app using — launchResultsViewer","text":"return anything. called side-effect launching Shiny app.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewerUsingSqlite.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch Shiny app using a SQLite database — launchResultsViewerUsingSqlite","title":"Launch Shiny app using a SQLite database — launchResultsViewerUsingSqlite","text":"Launch Shiny app using SQLite database","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewerUsingSqlite.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch Shiny app using a SQLite database — launchResultsViewerUsingSqlite","text":"","code":"launchResultsViewerUsingSqlite(sqliteFileName)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewerUsingSqlite.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch Shiny app using a SQLite database — launchResultsViewerUsingSqlite","text":"sqliteFileName name SQLite file results stored using insertExportedResultsInSqlite() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/launchResultsViewerUsingSqlite.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch Shiny app using a SQLite database — launchResultsViewerUsingSqlite","text":"return anything. called side-effect launching Shiny app.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCmAnalysisList.html","id":null,"dir":"Reference","previous_headings":"","what":"Load a list of CmAnalysis from file — loadCmAnalysisList","title":"Load a list of CmAnalysis from file — loadCmAnalysisList","text":"Load list objects type CmAnalysis file. file JSON format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCmAnalysisList.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load a list of CmAnalysis from file — loadCmAnalysisList","text":"","code":"loadCmAnalysisList(file)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCmAnalysisList.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load a list of CmAnalysis from file — loadCmAnalysisList","text":"file name file","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCmAnalysisList.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load a list of CmAnalysis from file — loadCmAnalysisList","text":"list objects type CmAnalysis.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCohortMethodData.html","id":null,"dir":"Reference","previous_headings":"","what":"Load the cohort method data from a file — loadCohortMethodData","title":"Load the cohort method data from a file — loadCohortMethodData","text":"Loads object type CohortMethodData file file system.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCohortMethodData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load the cohort method data from a file — loadCohortMethodData","text":"","code":"loadCohortMethodData(file)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCohortMethodData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load the cohort method data from a file — loadCohortMethodData","text":"file name file containing data.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadCohortMethodData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load the cohort method data from a file — loadCohortMethodData","text":"object class CohortMethodData.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadTargetComparatorOutcomesList.html","id":null,"dir":"Reference","previous_headings":"","what":"Load a list of TargetComparatorOutcomes from file — loadTargetComparatorOutcomesList","title":"Load a list of TargetComparatorOutcomes from file — loadTargetComparatorOutcomesList","text":"Load list objects type TargetComparatorOutcomes file. file JSON format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadTargetComparatorOutcomesList.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load a list of TargetComparatorOutcomes from file — loadTargetComparatorOutcomesList","text":"","code":"loadTargetComparatorOutcomesList(file)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadTargetComparatorOutcomesList.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load a list of TargetComparatorOutcomes from file — loadTargetComparatorOutcomesList","text":"file name file","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/loadTargetComparatorOutcomesList.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load a list of TargetComparatorOutcomes from file — loadTargetComparatorOutcomesList","text":"list objects type TargetComparatorOutcomes.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPs.html","id":null,"dir":"Reference","previous_headings":"","what":"Match persons by propensity score — matchOnPs","title":"Match persons by propensity score — matchOnPs","text":"Use provided propensity scores match target comparator persons.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Match persons by propensity score — matchOnPs","text":"","code":"matchOnPs(   population,   matchOnPsArgs = createMatchOnPsArgs(),   cohortMethodData = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Match persons by propensity score — matchOnPs","text":"population data frame three columns described . matchOnPsArgs object type MatchOnPsArgs created createMatchOnPsArgs() function. cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). Needed additionally matching covariate IDs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Match persons by propensity score — matchOnPs","text":"Returns date frame columns input data plus one extra column: stratumId. rows matched removed","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Match persons by propensity score — matchOnPs","text":"data frame following three columns: rowId (numeric): unique identifier row (e.g. person ID). treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score. default caliper (0.2 standardized logit scale) one recommended Austin (2011).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Match persons by propensity score — matchOnPs","text":"Rassen JA, Shelat AA, Myers J, Glynn RJ, Rothman KJ, Schneeweiss S. (2012) One--many propensity score matching cohort studies, Pharmacoepidemiology Drug Safety, May, 21 Suppl 2:69-80. Austin, PC. (2011) Optimal caliper widths propensity-score matching estimating differences means differences proportions observational studies, Pharmaceutical statistics, March, 10(2):150-161.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Match persons by propensity score — matchOnPs","text":"","code":"rowId <- 1:5 treatment <- c(1, 0, 1, 0, 1) propensityScore <- c(0, 0.1, 0.3, 0.4, 1) age_group <- c(1, 1, 1, 1, 1) data <- data.frame(   rowId = rowId,   treatment = treatment,   propensityScore = propensityScore,   age_group = age_group ) result <- matchOnPs(data, createMatchOnPsArgs(   caliper = 0,   maxRatio = 1,   matchColumns = \"age_group\") ) #> Population size after matching is 4"},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPsAndCovariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Match by propensity score as well as other covariates — matchOnPsAndCovariates","title":"Match by propensity score as well as other covariates — matchOnPsAndCovariates","text":"Use provided propensity scores set covariates match target comparator persons.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPsAndCovariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Match by propensity score as well as other covariates — matchOnPsAndCovariates","text":"","code":"matchOnPsAndCovariates(   population,   caliper = 0.2,   caliperScale = \"standardized logit\",   maxRatio = 1,   allowReverseMatch = FALSE,   cohortMethodData,   covariateIds )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPsAndCovariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Match by propensity score as well as other covariates — matchOnPsAndCovariates","text":"population data frame three columns described . caliper caliper matching. caliper distance acceptable match. Observations outside caliper dropped. caliper 0 means caliper used. caliperScale scale caliper defined. Three scales supported: caliperScale = 'propensity score', caliperScale = 'standardized', caliperScale = 'standardized logit'. standardized scale, caliper interpreted standard deviations propensity score distribution. 'standardized logit' similar, except propensity score transformed logit scale PS likely normally distributed scale (Austin, 2011). maxRatio maximum number persons comparator arm matched person treatment arm. maxRatio 0 means maximum: comparators assigned target person. allowReverseMatch Allows n--1 matching target arm larger cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). covariateIds One covariate IDs cohortMethodData object subjects also matched.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPsAndCovariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Match by propensity score as well as other covariates — matchOnPsAndCovariates","text":"Returns tibble columns input data plus one extra column: stratumId. rows matched removed","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPsAndCovariates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Match by propensity score as well as other covariates — matchOnPsAndCovariates","text":"data frame following three columns: rowId (numeric): unique identifier row (e.g. person ID). treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score. default caliper (0.2 standardized logit scale) one recommended Austin (2011).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/matchOnPsAndCovariates.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Match by propensity score as well as other covariates — matchOnPsAndCovariates","text":"Rassen JA, Shelat AA, Myers J, Glynn RJ, Rothman KJ, Schneeweiss S. (2012) One--many propensity score matching cohort studies, Pharmacoepidemiology Drug Safety, May, 21 Suppl 2:69-80. Austin, PC. (2011) Optimal caliper widths propensity-score matching estimating differences means differences proportions observational studies, Pharmaceutical statistics, March, 10(2):150-161.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/migrateDataModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Migrate Data model — migrateDataModel","title":"Migrate Data model — migrateDataModel","text":"Migrate data current state next state strongly advised backup data (either sqlite files, backup database (case using postgres backend) kept csv/zip files data generation.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/migrateDataModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Migrate Data model — migrateDataModel","text":"","code":"migrateDataModel(connectionDetails, databaseSchema, tablePrefix = \"\")"},{"path":"https://ohdsi.github.io/CohortMethod/reference/migrateDataModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Migrate Data model — migrateDataModel","text":"connectionDetails DatabaseConnector connection details object databaseSchema String schema database schema lives tablePrefix (Optional) Use table prefix used table names (e.g. \"cd_\")","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceOfTopVariables.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot variables with largest imbalance — plotCovariateBalanceOfTopVariables","title":"Plot variables with largest imbalance — plotCovariateBalanceOfTopVariables","text":"Create plot showing variables largest imbalance matching, variables largest imbalance matching. Requires running computeCovariateBalance first.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceOfTopVariables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot variables with largest imbalance — plotCovariateBalanceOfTopVariables","text":"","code":"plotCovariateBalanceOfTopVariables(   balance,   n = 20,   maxNameWidth = 100,   title = NULL,   fileName = NULL,   beforeLabel = \"before matching\",   afterLabel = \"after matching\" )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceOfTopVariables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot variables with largest imbalance — plotCovariateBalanceOfTopVariables","text":"balance data frame created computeCovariateBalance function. n (Maximum) count covariates plot. maxNameWidth Covariate names longer number characters truncated create nicer plot. title Optional: main title plot. fileName Name file plot saved, example 'plot.png'. See function ggsave ggplot2 package supported file formats. beforeLabel Label identifying data matching / stratification / trimming. afterLabel Label identifying data matching / stratification / trimming.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceOfTopVariables.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot variables with largest imbalance — plotCovariateBalanceOfTopVariables","text":"ggplot object. Use ggplot2::ggsave function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceScatterPlot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a scatterplot of the covariate balance — plotCovariateBalanceScatterPlot","title":"Create a scatterplot of the covariate balance — plotCovariateBalanceScatterPlot","text":"Create scatterplot covariate balance, showing variables balance matching x y axis respectively. Requires running computeCovariateBalance first.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceScatterPlot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a scatterplot of the covariate balance — plotCovariateBalanceScatterPlot","text":"","code":"plotCovariateBalanceScatterPlot(   balance,   absolute = TRUE,   threshold = 0,   title = \"Standardized difference of mean\",   fileName = NULL,   beforeLabel = \"Before matching\",   afterLabel = \"After matching\",   showCovariateCountLabel = FALSE,   showMaxLabel = FALSE,   showUnbalanced = FALSE )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceScatterPlot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a scatterplot of the covariate balance — plotCovariateBalanceScatterPlot","text":"balance data frame created computeCovariateBalance function. absolute absolute value difference used? threshold Show threshold value matching standardized difference. title main title plot. fileName Name file plot saved, example 'plot.png'. See function ggsave ggplot2 package supported file formats. beforeLabel Label x-axis. afterLabel Label y-axis. showCovariateCountLabel Show label number covariates included plot? showMaxLabel Show label maximum absolute standardized difference matching/stratification? showUnbalanced Show covariates considered unbalanced different color?","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariateBalanceScatterPlot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a scatterplot of the covariate balance — plotCovariateBalanceScatterPlot","text":"ggplot object. Use ggplot2::ggsave function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariatePrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot covariate prevalence — plotCovariatePrevalence","title":"Plot covariate prevalence — plotCovariatePrevalence","text":"Plot prevalence binary covariates target comparator cohorts, matching. Requires running computeCovariateBalance first.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariatePrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot covariate prevalence — plotCovariatePrevalence","text":"","code":"plotCovariatePrevalence(   balance,   threshold = 0,   title = \"Covariate prevalence\",   fileName = NULL,   beforeLabel = \"Before matching\",   afterLabel = \"After matching\",   targetLabel = \"Target\",   comparatorLabel = \"Comparator\" )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariatePrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot covariate prevalence — plotCovariatePrevalence","text":"balance data frame created computeCovariateBalance function. threshold threshold value standardized difference. exceeding threshold, covariates marked different color. threshold = 0, color coding used. title main title plot. fileName Name file plot saved, example 'plot.png'. See function ggsave ggplot2 package supported file formats. beforeLabel Label matching / stratification panel. afterLabel Label matching / stratification panel. targetLabel Label x-axis. comparatorLabel Label y-axis.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotCovariatePrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot covariate prevalence — plotCovariatePrevalence","text":"ggplot object. Use ggplot2::ggsave function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotFollowUpDistribution.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the distribution of follow-up time — plotFollowUpDistribution","title":"Plot the distribution of follow-up time — plotFollowUpDistribution","text":"Plot distribution follow-time","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotFollowUpDistribution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the distribution of follow-up time — plotFollowUpDistribution","text":"","code":"plotFollowUpDistribution(   population,   targetLabel = \"Target\",   comparatorLabel = \"Comparator\",   yScale = \"percent\",   logYScale = FALSE,   dataCutoff = 0.95,   title = NULL,   fileName = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotFollowUpDistribution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the distribution of follow-up time — plotFollowUpDistribution","text":"population data frame describing study population created using createStudyPopulation function. least columns: treatment, timeAtRisk. targetLabel label us target cohort. comparatorLabel label us comparator cohort. yScale either 'percent' 'count'. logYScale Y axis log scale? dataCutoff Fraction data (number censored) graph shown. title main title plot. fileName Name file plot saved, example 'plot.png'. See function ggsave ggplot2 package supported file formats.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotFollowUpDistribution.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the distribution of follow-up time — plotFollowUpDistribution","text":"ggplot object. Use ggsave function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotFollowUpDistribution.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot the distribution of follow-up time — plotFollowUpDistribution","text":"Plot distribution follow-time, stratified treatment group.Follow-time defined time--risk, censored outcome.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotKaplanMeier.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the Kaplan-Meier curve — plotKaplanMeier","title":"Plot the Kaplan-Meier curve — plotKaplanMeier","text":"plotKaplanMeier creates Kaplan-Meier (KM) survival plot. Based (partially) recommendations Pocock et al (2002). variable-sized strata detected, adjusted KM plot computed account stratified data, described Galimberti eta al (2002), using closed form variance estimator described Xie et al (2005).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotKaplanMeier.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the Kaplan-Meier curve — plotKaplanMeier","text":"","code":"plotKaplanMeier(   population,   censorMarks = FALSE,   confidenceIntervals = TRUE,   includeZero = FALSE,   dataTable = TRUE,   dataCutoff = 0.9,   targetLabel = \"Treated\",   comparatorLabel = \"Comparator\",   title = NULL,   fileName = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotKaplanMeier.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the Kaplan-Meier curve — plotKaplanMeier","text":"population population object generated createStudyPopulation, potentially filtered functions. censorMarks Whether include censor marks plot. confidenceIntervals Plot 95 percent confidence intervals? Default TRUE, recommended Pocock et al. includeZero y axis include zero, go lowest observed survival? default FALSE, recommended Pocock et al. dataTable numbers risk shown table? Default TRUE, recommended Pocock et al. dataCutoff Fraction data (number censored) graph shown. default 90 percent recommended Pocock et al. targetLabel label us target cohort. comparatorLabel label us comparator cohort. title main title plot. fileName Name file plot saved, example 'plot.png'. See function ggsave ggplot2 package supported file formats.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotKaplanMeier.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the Kaplan-Meier curve — plotKaplanMeier","text":"ggplot object. Use ggsave function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotKaplanMeier.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Plot the Kaplan-Meier curve — plotKaplanMeier","text":"Pocock SJ, Clayton TC, Altman DG. (2002) Survival plots time--event outcomes clinical trials: good practice pitfalls, Lancet, 359:1686-89. Galimberti S, Sasieni P, Valsecchi MG (2002) weighted Kaplan-Meier estimator matched data application comparison chemotherapy bone-marrow transplant leukaemia. Statistics Medicine, 21(24):3847-64. Xie J, Liu C. (2005) Adjusted Kaplan-Meier estimator log-rank test inverse probability treatment weighting survival data. Statistics Medicine, 26(10):2276.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotPs.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the propensity score distribution — plotPs","title":"Plot the propensity score distribution — plotPs","text":"Plots propensity (preference) score distribution.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotPs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the propensity score distribution — plotPs","text":"","code":"plotPs(   data,   unfilteredData = NULL,   scale = \"preference\",   type = \"density\",   binWidth = 0.05,   targetLabel = \"Target\",   comparatorLabel = \"Comparator\",   showCountsLabel = FALSE,   showAucLabel = FALSE,   showEquipoiseLabel = FALSE,   equipoiseBounds = c(0.3, 0.7),   unitOfAnalysis = \"subjects\",   title = NULL,   fileName = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotPs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the propensity score distribution — plotPs","text":"data data frame least two columns described unfilteredData used computing preference scores data subjects already removed, e.g. trimming /matching. data frame structure data. scale scale graph. Two scales supported: scale = 'propensity' scale = 'preference'. preference score scale defined Walker et al (2013). type Type plot. Four possible values: type = 'density'  type = 'histogram', type = 'histogramCount', type = 'histogramProportion'. 'histogram' defaults 'histogramCount'. binWidth histograms, width bins targetLabel label us target cohort. comparatorLabel label us comparator cohort. showCountsLabel Show subject counts? showAucLabel Show AUC? showEquipoiseLabel Show percentage population equipoise? equipoiseBounds bounds preference score determine whether subject equipoise. unitOfAnalysis unit analysis input data. Defaults 'subjects'. title Optional: main title plot. fileName Name file plot saved, example 'plot.png'. See function ggplot2::ggsave() supported file formats.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotPs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the propensity score distribution — plotPs","text":"ggplot object. Use ggplot2::ggsave() function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotPs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot the propensity score distribution — plotPs","text":"data frame least following two columns: treatment (integer): Column indicating whether person target (1) comparator (0) group propensityScore (numeric): Propensity score","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotPs.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Plot the propensity score distribution — plotPs","text":"Walker , Patrick AR, Lauer MS, Hornbrook MC, Marin MG, Platt R, Roger VL, Stang P, Schneeweiss S. (2013) tool assessing feasibility comparative effectiveness research, Comparative Effective Research, 3, 11-20","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotPs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot the propensity score distribution — plotPs","text":"","code":"treatment <- rep(0:1, each = 100) propensityScore <- c(rnorm(100, mean = 0.4, sd = 0.25), rnorm(100, mean = 0.6, sd = 0.25)) data <- data.frame(treatment = treatment, propensityScore = propensityScore) data <- data[data$propensityScore > 0 & data$propensityScore < 1, ] plotPs(data)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotTimeToEvent.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot time-to-event — plotTimeToEvent","title":"Plot time-to-event — plotTimeToEvent","text":"Plot time--event","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotTimeToEvent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot time-to-event — plotTimeToEvent","text":"","code":"plotTimeToEvent(   cohortMethodData,   population = NULL,   outcomeId = NULL,   minDaysAtRisk = 1,   riskWindowStart = 0,   startAnchor = \"cohort start\",   riskWindowEnd = 0,   endAnchor = \"cohort end\",   censorAtNewRiskWindow = FALSE,   periodLength = 7,   numberOfPeriods = 52,   highlightExposedEvents = TRUE,   includePostIndexTime = TRUE,   showFittedLines = TRUE,   targetLabel = \"Target\",   comparatorLabel = \"Comparator\",   title = NULL,   fileName = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotTimeToEvent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot time-to-event — plotTimeToEvent","text":"cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). population specified, population used starting point instead cohorts cohortMethodData object. outcomeId ID outcome. NULL, outcome-specific transformations performed. minDaysAtRisk minimum required number days risk. riskWindowStart start risk window (days) relative startAnchor. startAnchor anchor point start risk window. Can \"cohort start\" \"cohort end\". riskWindowEnd end risk window (days) relative endAnchor. endAnchor anchor point end risk window. Can \"cohort start\" \"cohort end\". censorAtNewRiskWindow subject multiple cohorts, time--risk censored new time--risk starts prevent overlap? periodLength length days period shown plot. numberOfPeriods Number periods show plot. periods equally divided index date. highlightExposedEvents (logical) Highlight event counts exposure different color? includePostIndexTime (logical) Show time index date? showFittedLines (logical) Fit lines proportions show plot? targetLabel label us target cohort. comparatorLabel label us comparator cohort. title Optional: main title plot. fileName Name file plot saved, example 'plot.png'. See ggplot2::ggsave() supported file formats.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotTimeToEvent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot time-to-event — plotTimeToEvent","text":"ggplot object. Use ggplot2::ggsave() function save file different format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/plotTimeToEvent.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot time-to-event — plotTimeToEvent","text":"Creates plot showing number events time target comparator cohorts, index date. plot also distinguishes events inside outside time--risk period. requires user (re)specify time--risk using arguments createStudyPopulation() function. Note possible specify people outcome prior removed, since plot show prior events.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/runCmAnalyses.html","id":null,"dir":"Reference","previous_headings":"","what":"Run a list of analyses — runCmAnalyses","title":"Run a list of analyses — runCmAnalyses","text":"Run list analyses","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/runCmAnalyses.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run a list of analyses — runCmAnalyses","text":"","code":"runCmAnalyses(   connectionDetails,   cdmDatabaseSchema,   tempEmulationSchema = getOption(\"sqlRenderTempEmulationSchema\"),   exposureDatabaseSchema = cdmDatabaseSchema,   exposureTable = \"drug_era\",   outcomeDatabaseSchema = cdmDatabaseSchema,   outcomeTable = \"condition_occurrence\",   nestingCohortDatabaseSchema = cdmDatabaseSchema,   nestingCohortTable = \"cohort\",   outputFolder = \"./CohortMethodOutput\",   multiThreadingSettings = createMultiThreadingSettings(),   cmAnalysesSpecifications )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/runCmAnalyses.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run a list of analyses — runCmAnalyses","text":"connectionDetails R object type connectionDetails created using DatabaseConnector::createConnectionDetails() function. cdmDatabaseSchema name database schema contains OMOP CDM instance. Requires read permissions database. SQL Server, specify database schema, example 'cdm_instance.dbo'. tempEmulationSchema database platforms like Oracle Impala truly support temp tables. emulate temp tables, provide schema write privileges temp tables can created. exposureDatabaseSchema name database schema location exposure data used define exposure cohorts available. exposureTable = DRUG_ERA, exposureDatabaseSchema used assumed cdmSchema.  Requires read permissions database. exposureTable tablename contains exposure cohorts.  exposureTable <> DRUG_ERA, expectation exposureTable format COHORT table: COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE, COHORT_END_DATE. outcomeDatabaseSchema name database schema location data used define outcome cohorts available. exposureTable = CONDITION_ERA, exposureDatabaseSchema used assumed cdmSchema.  Requires read permissions database. outcomeTable tablename contains outcome cohorts.  outcomeTable <> CONDITION_OCCURRENCE, expectation outcomeTable format COHORT table: COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE, COHORT_END_DATE. nestingCohortDatabaseSchema name database schema location data used define nesting cohorts available. nestingCohortTable tablename contains nesting cohorts. Must format COHORT table: COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE, COHORT_END_DATE. outputFolder Name folder outputs written . multiThreadingSettings object type CmMultiThreadingSettings created using createMultiThreadingSettings() createDefaultMultiThreadingSettings() functions. cmAnalysesSpecifications object type CmAnalysesSpecifications created using createCmAnalysesSpecifications().","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/runCmAnalyses.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run a list of analyses — runCmAnalyses","text":"tibble describing target-comparator-outcome-analysisId combination intermediary outcome model files can found, relative outputFolder.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/runCmAnalyses.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run a list of analyses — runCmAnalyses","text":"Run list analyses target-comparator-outcomes interest. function run specified analyses hypotheses interest, meaning total number outcome models length(cmAnalysisList) * length(targetComparatorOutcomesList) (analyses specify outcome model fitted). provide several analyses determine whether analyses anything common, take advantage fact. example, specify several analyses differ way outcome model fitted, function extract data fit propensity model , re-use analysis. completion, tibble containing references generated files can obtained using getFileReference() function. summary analysis results can obtained using getResultsSummary() function. Diagnostics can loaded using getDiagnosticsSummary() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveCmAnalysisList.html","id":null,"dir":"Reference","previous_headings":"","what":"Save a list of CmAnalysis to file — saveCmAnalysisList","title":"Save a list of CmAnalysis to file — saveCmAnalysisList","text":"Write list objects type CmAnalysis file. file JSON format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveCmAnalysisList.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save a list of CmAnalysis to file — saveCmAnalysisList","text":"","code":"saveCmAnalysisList(CmAnalysisList, file)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveCmAnalysisList.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save a list of CmAnalysis to file — saveCmAnalysisList","text":"CmAnalysisList list objects type CmAnalysis created using createCmAnalysis() function. file name file results written","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveCohortMethodData.html","id":null,"dir":"Reference","previous_headings":"","what":"Save the cohort method data to file — saveCohortMethodData","title":"Save the cohort method data to file — saveCohortMethodData","text":"Saves object type CohortMethodData file.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveCohortMethodData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save the cohort method data to file — saveCohortMethodData","text":"","code":"saveCohortMethodData(cohortMethodData, file)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveCohortMethodData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save the cohort method data to file — saveCohortMethodData","text":"cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). file name file data written. file already exists overwritten.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveCohortMethodData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save the cohort method data to file — saveCohortMethodData","text":"Returns output.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveTargetComparatorOutcomesList.html","id":null,"dir":"Reference","previous_headings":"","what":"Save a list of TargetComparatorOutcomes to file — saveTargetComparatorOutcomesList","title":"Save a list of TargetComparatorOutcomes to file — saveTargetComparatorOutcomesList","text":"Write list objects type TargetComparatorOutcomes file. file JSON format.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveTargetComparatorOutcomesList.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save a list of TargetComparatorOutcomes to file — saveTargetComparatorOutcomesList","text":"","code":"saveTargetComparatorOutcomesList(targetComparatorOutcomesList, file)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/saveTargetComparatorOutcomesList.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save a list of TargetComparatorOutcomes to file — saveTargetComparatorOutcomesList","text":"targetComparatorOutcomesList list objects type TargetComparatorOutcomes created using createTargetComparatorOutcomes() function. file name file results written","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/simulateCohortMethodData.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate simulated data — simulateCohortMethodData","title":"Generate simulated data — simulateCohortMethodData","text":"Creates CohortMethodData object simulated data.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/simulateCohortMethodData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate simulated data — simulateCohortMethodData","text":"","code":"simulateCohortMethodData(profile, n = 10000)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/simulateCohortMethodData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate simulated data — simulateCohortMethodData","text":"profile object type CohortMethodDataSimulationProfile generated using createCohortMethodDataSimulationProfile() function. n size population generated.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/simulateCohortMethodData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate simulated data — simulateCohortMethodData","text":"object type CohortMethodData.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/simulateCohortMethodData.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate simulated data — simulateCohortMethodData","text":"function generates simulated data many ways similar original data simulation profile based. contains outcome, comparator, outcome concept IDs, covariates 1st order statistics comparable.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPs.html","id":null,"dir":"Reference","previous_headings":"","what":"Stratify persons by propensity score — stratifyByPs","title":"Stratify persons by propensity score — stratifyByPs","text":"Use provided propensity scores stratify persons. Additional stratification variables stratifications can also used.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stratify persons by propensity score — stratifyByPs","text":"","code":"stratifyByPs(   population,   stratifyByPsArgs = createStratifyByPsArgs(),   cohortMethodData = NULL )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stratify persons by propensity score — stratifyByPs","text":"population data frame three columns described stratifyByPsArgs object type StratifyByPsArgs created createStratifyByPsArgs() function. cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). Needed additionally matching covariate IDs.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stratify persons by propensity score — stratifyByPs","text":"Returns tibble columns input data plus one extra column: stratumId.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Stratify persons by propensity score — stratifyByPs","text":"data frame following three columns: rowId (numeric): unique identifier row (e.g. person ID). treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Stratify persons by propensity score — stratifyByPs","text":"","code":"rowId <- 1:200 treatment <- rep(0:1, each = 100) propensityScore <- c(runif(100, min = 0, max = 1), runif(100, min = 0, max = 1)) data <- data.frame(rowId = rowId, treatment = treatment, propensityScore = propensityScore) result <- stratifyByPs(data, createStratifyByPsArgs(numberOfStrata = 5))"},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPsAndCovariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Stratify persons by propensity score and other covariates — stratifyByPsAndCovariates","title":"Stratify persons by propensity score and other covariates — stratifyByPsAndCovariates","text":"Use provided propensity scores covariates stratify persons.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPsAndCovariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stratify persons by propensity score and other covariates — stratifyByPsAndCovariates","text":"","code":"stratifyByPsAndCovariates(   population,   numberOfStrata = 5,   baseSelection = \"all\",   cohortMethodData,   covariateIds )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPsAndCovariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stratify persons by propensity score and other covariates — stratifyByPsAndCovariates","text":"population data frame three columns described numberOfStrata many strata propensity score divided? boundaries strata automatically defined contain equal numbers target persons. baseSelection base selection subjects strata bounds determined? Strata defined equally-sized strata inside selection. Possible values \"\", \"target\", \"comparator\". cohortMethodData object type CohortMethodData generated using getDbCohortMethodData(). covariateIds One covariate IDs cohortMethodData object subjects also stratified.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPsAndCovariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stratify persons by propensity score and other covariates — stratifyByPsAndCovariates","text":"Returns date frame columns input population plus one extra column: stratumId.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/stratifyByPsAndCovariates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Stratify persons by propensity score and other covariates — stratifyByPsAndCovariates","text":"data frame following three columns: rowId (numeric): unique identifier row (e.g. person ID). treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByIptw.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove subjects with a high IPTW — trimByIptw","title":"Remove subjects with a high IPTW — trimByIptw","text":"Remove subjects weight higher user-specified threshold.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByIptw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove subjects with a high IPTW — trimByIptw","text":"","code":"trimByIptw(population, maxWeight = 10)"},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByIptw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove subjects with a high IPTW — trimByIptw","text":"population data frame least two columns described details maxWeight maximum allowed IPTW.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByIptw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove subjects with a high IPTW — trimByIptw","text":"Returns tibble  columns input.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByIptw.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove subjects with a high IPTW — trimByIptw","text":"data frame following two columns: treatment (integer): Column indicating whether person target (1) comparator (0) group. iptw (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByIptw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove subjects with a high IPTW — trimByIptw","text":"","code":"rowId <- 1:2000 treatment <- rep(0:1, each = 1000) iptw <- 1 / c(runif(1000, min = 0, max = 1), runif(1000, min = 0, max = 1)) data <- data.frame(rowId = rowId, treatment = treatment, iptw = iptw) result <- trimByIptw(data) #> Population size after trimming is 1771"},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPs.html","id":null,"dir":"Reference","previous_headings":"","what":"Trim persons by propensity score — trimByPs","title":"Trim persons by propensity score — trimByPs","text":"Use provided propensity scores trim subjects extreme scores weights.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trim persons by propensity score — trimByPs","text":"","code":"trimByPs(population, trimByPsArgs = createTrimByPsArgs(trimFraction = 0.05))"},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trim persons by propensity score — trimByPs","text":"population data frame three columns described trimByPsArgs object type trimByPsArgs created createTrimByPsArgs() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trim persons by propensity score — trimByPs","text":"Returns tibble three columns input.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Trim persons by propensity score — trimByPs","text":"data frame following three columns: rowId (numeric): unique identifier row (e.g. person ID). treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trim persons by propensity score — trimByPs","text":"","code":"rowId <- 1:2000 treatment <- rep(0:1, each = 1000) propensityScore <- c(runif(1000, min = 0, max = 1), runif(1000, min = 0, max = 1)) iptw <- ifelse(treatment == 1,                mean(treatment == 1) / propensityScore,                mean(treatment == 0) / (1 - propensityScore)) data <- data.frame(rowId = rowId,                    treatment = treatment,                    propensityScore = propensityScore,                    iptw = iptw) result1 <- trimByPs(data, createTrimByPsArgs(trimFraction = 0.05)) #> Trimming removed 50 (5.0%) rows from the target, 50 (5.0%) rows from the comparator. result2 <- trimByPs(data, createTrimByPsArgs(equipoiseBounds = c(0.3, 0.7))) #> Trimming removed 597 (59.7%) rows from the target, 592 (59.2%) rows from the comparator. result3 <- trimByPs(data, createTrimByPsArgs(maxWeight = 10)) #> Trimming removed 51 (5.1%) rows from the target, 49 (4.9%) rows from the comparator."},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPsToEquipoise.html","id":null,"dir":"Reference","previous_headings":"","what":"Keep only persons in clinical equipoise — trimByPsToEquipoise","title":"Keep only persons in clinical equipoise — trimByPsToEquipoise","text":"Use preference score trim subjects clinical equipoise","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPsToEquipoise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Keep only persons in clinical equipoise — trimByPsToEquipoise","text":"","code":"trimByPsToEquipoise(population, bounds = c(0.3, 0.7))"},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPsToEquipoise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Keep only persons in clinical equipoise — trimByPsToEquipoise","text":"population data frame least three columns described . bounds upper lower bound preference score keeping persons.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPsToEquipoise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Keep only persons in clinical equipoise — trimByPsToEquipoise","text":"Returns tibble three columns input.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPsToEquipoise.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Keep only persons in clinical equipoise — trimByPsToEquipoise","text":"data frame following three columns: rowId (numeric): unique identifier row (e.g. person ID). treatment (integer): Column indicating whether person target (1) comparator (0) group. propensityScore (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPsToEquipoise.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Keep only persons in clinical equipoise — trimByPsToEquipoise","text":"Walker , Patrick AR, Lauer MS, Hornbrook MC, Marin MG, Platt R, Roger VL, Stang P, Schneeweiss S. (2013) tool assessing feasibility comparative effectiveness research, Comparative Effective Research, 3, 11-20","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/trimByPsToEquipoise.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Keep only persons in clinical equipoise — trimByPsToEquipoise","text":"","code":"rowId <- 1:2000 treatment <- rep(0:1, each = 1000) propensityScore <- c(runif(1000, min = 0, max = 1), runif(1000, min = 0, max = 1)) data <- data.frame(rowId = rowId, treatment = treatment, propensityScore = propensityScore) result <- trimByPsToEquipoise(data) #> Population size after trimming is 829"},{"path":"https://ohdsi.github.io/CohortMethod/reference/truncateIptw.html","id":null,"dir":"Reference","previous_headings":"","what":"Truncate IPTW values — truncateIptw","title":"Truncate IPTW values — truncateIptw","text":"Set inverse probability treatment weights (IPTW) user-specified threshold exceeds said threshold.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/truncateIptw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Truncate IPTW values — truncateIptw","text":"","code":"truncateIptw(population, truncateIptwArgs = createTruncateIptwArgs())"},{"path":"https://ohdsi.github.io/CohortMethod/reference/truncateIptw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Truncate IPTW values — truncateIptw","text":"population data frame least two columns described details. truncateIptwArgs object type TruncateIptwArgs created createTruncateIptwArgs() function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/truncateIptw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Truncate IPTW values — truncateIptw","text":"Returns tibble  columns input.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/truncateIptw.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Truncate IPTW values — truncateIptw","text":"data frame following two columns: treatment (integer): Column indicating whether person target (1) comparator (0) group. iptw (numeric): Propensity score.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/truncateIptw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Truncate IPTW values — truncateIptw","text":"","code":"rowId <- 1:2000 treatment <- rep(0:1, each = 1000) iptw <- 1 / c(runif(1000, min = 0, max = 1), runif(1000, min = 0, max = 1)) data <- data.frame(rowId = rowId, treatment = treatment, iptw = iptw) result <- truncateIptw(data) #> Truncating 192 (9.6%) IPTW values"},{"path":"https://ohdsi.github.io/CohortMethod/reference/uploadResults.html","id":null,"dir":"Reference","previous_headings":"","what":"Upload results to the database server. — uploadResults","title":"Upload results to the database server. — uploadResults","text":"Requires results data model tables created using createResultsDataModel function.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/reference/uploadResults.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Upload results to the database server. — uploadResults","text":"","code":"uploadResults(   connectionDetails,   schema,   zipFileName,   forceOverWriteOfSpecifications = FALSE,   purgeSiteDataBeforeUploading = TRUE,   tempFolder = tempdir(),   tablePrefix = \"\",   ... )"},{"path":"https://ohdsi.github.io/CohortMethod/reference/uploadResults.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Upload results to the database server. — uploadResults","text":"connectionDetails object type connectionDetails created using createConnectionDetails function DatabaseConnector package. schema schema server tables created. zipFileName name zip file. forceOverWriteOfSpecifications TRUE, specifications phenotypes, cohort definitions, analysis overwritten already exist database. use specifications changed since last upload. purgeSiteDataBeforeUploading TRUE, inserting data specific databaseId data site dropped. assumes input zip file contains full data data site. tempFolder folder local file system zip files extracted . cleaned function finished. Can used specify temp folder drive sufficient space default system temp space limited. tablePrefix (Optional)  string insert table names database table names ... See ResultModelManager::uploadResults","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-600","dir":"Changelog","previous_headings":"","what":"CohortMethod 6.0.0","title":"CohortMethod 6.0.0","text":"major release introduces many changes. three important ones (1) changing settings objects, (2) supporting nesting cohorts, (3) covariate balance significance testing.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"changes-related-to-the-settings-objects-6-0-0","dir":"Changelog","previous_headings":"","what":"Changes related to the settings objects","title":"CohortMethod 6.0.0","text":"settings objects changed R6 classes, now used calling functions individually using runCmAnalyses(). main rationale allows 3rd parties easily generate valid settings. Dropped cdmVersion argument getDbCohortMethodData() runCmAnalyses(). version identified cdm_source table. Dropped trimByIptw() trimByPsToEquipoise() functions. Added equipoiseBounds maxWeight arguments createTrimByPsArgs() functionality remains. Dropped matchOnPsAndCovariates() function added stratificationCovariateIds argument createMatchOnPsArgs() functionality remains. Dropped stratifyByPsAndCovariates() function added stratificationCovariateIds argument createStratifyByPsPsArgs() functionality remains. Renamed createStudyPopArgs argument createCmAnalysis() createStudyPopulationArgs consistency. Dropping deprecated attritionFractionThreshold argument createCmDiagnosticThresholds(). amount attrition good measure generalizability. Use generalizability diagnostic instead, measures similarity target analytic cohort characteristcs. Changed default outcome model type ‘logistic’ ‘cox’. Set defaults createGetDbCohortMethodDataArgs() often used. Dropped firstExposureOnly, restrictToCommonPeriod, washoutPeriod, removeDuplicateSubjects arguments CreateStudyPopulationArgs. duplicated getDbCohortMethodData(), ’ll keep now .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"changes-related-to-nesting-cohorts-6-0-0","dir":"Changelog","previous_headings":"","what":"Changes related to nesting cohorts","title":"CohortMethod 6.0.0","text":"Added ability restrict nesting cohort (e.g. restricting drug exposures specific indication). See nestingCohortId argument createGetDbCohortMethodDataArgs() createTargetComparatorOutcomes() functions nestingCohortDatabaseSchema nestingCohortTable arguments getDbCohortMethodData() function. results schema now includes target_comparator table combines target_id, comparator_id, nesting_cohort_id single unique target_comparator_id. new ID hash components, allowing results multiple runs combined single database.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"changes-related-to-the-new-covariate-balance-diagnostic-6-0-0","dir":"Changelog","previous_headings":"","what":"Changes related to the new covariate balance diagnostic","title":"CohortMethod 6.0.0","text":"Added optional significance testing covariate balance. avoids failing balance diagnostic smaller databases just random chance, found superior methods research. introduces following changes interface: Added threshold alpha arguments createComputeCovariateBalanceArgs() function. impact blinding running runCmAnalyses add columns balance files, running single studies. Added sdmAlpha argument createCmDiagnosticThresholds() function. adds sdm_family_wise_min_p shared_sdm_family_wise_min_p fields cm_diagnostics_summary table exporting CSV. now, default use significance testing, family-wise min P can help understand one passed using .","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"other-important-changes-6-0-0","dir":"Changelog","previous_headings":"","what":"Other important changes","title":"CohortMethod 6.0.0","text":"Added new option removeDuplicateSubjects argument: “keep first, truncate second”. similar “keep first”, also truncates first exposure stop day second starts. Now performing empirical calibration removing estimates fail diagnostics. general lead narrower calibrated confidence intervals. high correlation detected fitting propensity model, stopOnError = FALSE, export show highly correlated covariates model extreme coefficients (1e6 * correlation). Added ability use bootstrap computing confidence intervals. See bootstrapCi bootstrapReplicates arguments createFitOutcomeModelArgs(). restrictions study populations performed getDbCohortMethodData() now step--step recorded attrition table. Completely updated unit tests increase coverage functional tests, also increasing speed. Renamed showEquipoiseLabel argument plotPs() showEquipoiseLabel.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"minor-changes-6-0-0","dir":"Changelog","previous_headings":"","what":"Minor changes","title":"CohortMethod 6.0.0","text":"Added support grid--gradient likelihood profiles. Use following arguments createFitOutcomeModelArgs() use: adds gradient field cm_likelihood_profile table exporting CSV. Removed mention legacy function grepCovariateNames() vignette. Added citation HADES paper package. Dropped insertExportedResultsInSqlite(), launchResultsViewerUsingSqlite, launchResultsViewer(). OhdsiShinyAppBuilder package used directly instead. Corrected minDaysAtRisk argument. Days risk now computed end - start + 1 (end day inclusive). Added vignette showing results schema.","code":"profileGrid = seq(log(0.1), log(10), length.out = 8), profileBounds = NULL"},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-552","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.5.2","title":"CohortMethod 5.5.2","text":"Bugfixes: Reorganized createPs() much efficient large study populations (millions patients). Reorganized fitOutcomeModel() much efficient large study populations (millions patients).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-551","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.5.1","title":"CohortMethod 5.5.1","text":"Bugfixes: Fixed error thrown Kaplan Meier curves functions one cohorts empty.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-550","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.5.0","title":"CohortMethod 5.5.0","text":"Changes: createPs() now checks filtering covariate data necessary (either subject removed study population excludeCovariateIds includeCovariateIds specified). filtering required, extra copy covariate data data created, saving IO time. Added minimumCaseCount argument createCohortMethodDataSimulationProfile(). Preparing Andromeda 1.0.0: longer assuming Andromeda tables sorted. Changing dependency ShinyAppBuilder OhdsiShinyAppBuilder. Bugfixes: Fixed NA covariate prevalences calling createCohortMethodDataSimulationProfile(). Added optimization createPs() prevent running memory large data objects using Andromeda >= 1.0.0.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-540","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.4.0","title":"CohortMethod 5.4.0","text":"Changes: Updating viewer code work newer versions OhdsiShinyModules ShinyAppBuilder. Dropped uploadExportedResults() function. cohorts argument insertExportedResultsInSqlite() column cohortId renamed cohortDefinitionId. Added computation MDRR logistic models.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-530","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.3.0","title":"CohortMethod 5.3.0","text":"Changes: Switching cohort IDs results model BIGINT. Bugfixes: Fix enforceCellCount() applied covariate balance balance NA. Stopping fitting PS model early either target comparator empty. Prevents error target comparator empty, sampling required, Cyclops happens fit model instead declaring ILL CONDITIONED. Message matching PS now shows correct number subjects remaining matching.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-521","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.2.1","title":"CohortMethod 5.2.1","text":"Changes: Ask delete files output folder calling runCmAnalyses() different analyses settings used create files. Also cleaning cache. Bugfixes: Fixed bug parsing covariate filter settings balance. Updated vignettes use latest Capr functions.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-520","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.2.0","title":"CohortMethod 5.2.0","text":"Changes: computeCovariateBalance() function now also computes standardized difference mean comparing cohorts PS adjustment, can inform generalizability. Added getGeneralizabilityTable() function. Improved computation overall standard deviation computing covariate balance (actually computing SD instead taking mean target comparator). produce accurate balance estimations. Generated population objects now keep track likely target estimator (e.g. ‘ATT’, ‘ATE’). informs selection base population calling getGeneralizabilityTable(). Deprecated attritionFractionThreshold argument createCmDiagnosticThresholds function, instead added generalizabilitySdmThreshold argument. results schema specifications exportToCsv() function changed: Removed attrition_fraction attrition_diagnostic fields cm_diagnostics_summary table. Added target_estimator field cm_result add cm_interaction_result tables. Added generalizability_max_sdm generalizabiltiy_diagnostic fields cm_diagnostics_summary table. Added mean_before, mean_after, target_std_diff, comparator_std_diff, target_comparator_std_diff fields cm_covariate_balance cm_shared_covariate_balance tables. Improve speed covariate balance computation. Adding one-sided (calibrated) p-values results summary results model. Adding unblind_for_evidence_synthesis field cm_diagnostics_summary table. cm_diagnostics_summary table now also contains negative controls. Bugfixes: Fixing runCmAnalyses() using refitPsForEveryOutcome = TRUE. Handling edge case exporting preference distribution target comparator 1 subject.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-510","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.1.0","title":"CohortMethod 5.1.0","text":"Changes: Now also unblinding shared balance diagnostic fails. Bugfixes: Fixing matching PS covariates. Now passing outcome-specific riskWindowEnd argument runCmAnalyses() specified. Fixed error calling createStudyPopulation() “keep first” 1 person population.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-500","dir":"Changelog","previous_headings":"","what":"CohortMethod 5.0.0","title":"CohortMethod 5.0.0","text":"Changes: Setting default Cyclops control object use resetCoefficients = TRUE ensure always get exact model, irrespective number threads used. Adding checking user input functions. Removing deprecated excludeDrugsFromCovariates argument getDbCohortMethodData() function. Removing deprecated oracleTempSchema argument getDbCohortMethodData() runCmAnalyses() functions. Removing deprecated addExposureDaysToStart addExposureDaysToStart arguments createStudyPopulation() plotTimeToEvent() functions. removeDuplicateSubjects argument getDbCohortMethodData() createStudyPopulation() longer allowed boolean. Adding computeEquipoise() function. Output likelihood profile data frame instead named vector consistency HADES packages. Added covariateFilter argument computeCovariateBalance function, allow balance computed subset covariates. Rounding propensity scores 10 digits improve reproducibility across operating systems. Setting covariateCohortDatabaseSchema covariateCohortTable cohort-based covariate builders exposureDatabaseSchema exposureTable, respectively covariateCohortTable NULL. Now computing IPTW createPs(), truncating IPTW can done truncateIptw(). computeCovariateBalance() function now computes balance using IPTW stratumId column found population argument. Removing PS exactly 0 exactly 1 computing standard deviation logit matching caliper allow matching subjects perfectly predictable treatment assignment. Adding maxRows argument computePsAuc() function improve speed large study populations. Dropping support CDM v4. Major overhaul multiple-analyses framework: Added createOutcome() function, used createTargetComparatorOutcomes(). allow priorOutcomeLookback, riskWindowStart, startAnchor, riskWindowEnd, endAnchor arguments specified per outcome. settings (provided) override settings created using createCreateStudyPopulationArgs() function. addition, createOutcome() function outcomeOfInterest trueEffectSize argument (see ). Added createComputeCovariateBalanceArgs() function, added computeSharedCovariateBalance, ,computeSharedCovariateBalanceArgs, computeCovariateBalance, computeCovariateBalanceArgs arguments createCmAnalysis() function, computeSharedBalanceThreads, computeBalanceThreads arguments runCmAnalyses() function allow computation covariate balance across target-comparator-analysis (shared) target-comparator-analysis-outcome runCmAnalyses() function. Dropping targetType comparatorType options createCmAnalysis() function, since notion analysis-specific target comparator selection strategies can also implemented using analysesToExclude argument runCmAnalyses(). Dropping outcomeIdsOfInterest argument runCmAnalyses() function. Instead, createOutcome() function now outcomeOfInterest argument. Settings related multi-threading combined single settings object created using new createCmMultiThreadingSettings() function. Dropping prefilterCovariates runCmAnalyses(). Prefiltering now always done specific covariates used outcome model. Removed summarizeAnalyses() function. Instead, results automatically summarized runCmAnalyses(). summary can retrieved using new getResultsSummary() getInteractionResultsSummary() functions. Empirical calibration, MDRR, attrition fraction automatically computed. Changing case output getResultsSummary() ci95lb ci95ub ci95Lb ci95Ub. Added empirical calibration getResultsSummary() function. Controls can identified trueEffectSize argument createOutcome() function. Dropping arguments like createPs fitOutcomeModel createCmAnalysis() function. Instead, providing createPsArgs fitOutcomeModelArgs assumed mean skipping propensity score creation outcome model fitting, respectively. Added exportToCsv() function exporting study results CSV files contain patient-level information can therefore shared sites. getResultsDataModel() function returns data model CSV files. Added uploadExportedResults() insertExportedResultsInSqlite() functions uploading results CSV files database. launchResultsViewer() launchResultsViewerUsingSqlite() functions added launching Shiny app view results (SQLite) database. Bug fixes: Fixed error using integer maxWeight performing IPTW.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-423","dir":"Changelog","previous_headings":"","what":"CohortMethod 4.2.3","title":"CohortMethod 4.2.3","text":"Changes; Removed RISCA Suggests list. package used single unit test, large amount difficult--install dependencies. Bug fixes: Fixed error failing model fitting caused new Cyclops version.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-422","dir":"Changelog","previous_headings":"","what":"CohortMethod 4.2.2","title":"CohortMethod 4.2.2","text":"Changes: Added analysesToExclude argument runCmAnalyses, allowing users specify target-comparator-outcome-analysis combinations exclude execution. Output computeCovariateBalance() now also contains domainId isBinary columns. Added plotCovariatePrevalence() function. Bug fixes: Fixed erroneous sample size reported comparator cohorts computing covariate balance. (actual sample size fine) Fixed error analyses fitOutcomeModel = FALSE. Fixed attrition counts using allowReverseMatch = TRUE","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-421","dir":"Changelog","previous_headings":"","what":"CohortMethod 4.2.1","title":"CohortMethod 4.2.1","text":"Changes: Adding highlightExposedEvents includePostIndexTime arguments plotTimeToEvent(). Adding maxCohortSize argument computeCovariateBalance() function. target comparator cohorts downsampled larger, speeding computation. Bug fixes: Fixed error thrown plotTimeToEvent() time periods plot nobody observed.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-420","dir":"Changelog","previous_headings":"","what":"CohortMethod 4.2.0","title":"CohortMethod 4.2.0","text":"Changes: Adding trimByIptw() function. Adding estimator argument fitOutcomeModel() function select ‘ate’ (average treatment effect) ‘att’ (average treatment effect treated) performing IPTW. Added maxWeight argument fitOutcomeModel() function. Weights greater value set value. Adding option use adaptive likelihood profiling, making default. Adding maxDaysAtRisk argument createStudyPopulation() createCreateStudyPopulationArgs() functions. Bug fixes: Fixing IPTW. Fixing error stratifying base population empty (overall population ).","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-410","dir":"Changelog","previous_headings":"","what":"CohortMethod 4.1.0","title":"CohortMethod 4.1.0","text":"Changes: Dropped insertDbPopulation() function. didn’t seem used anyone, required carrying person ID throughout pipeline. Introducing new unique person identified called personSeqId, generated data extraction. Person ID now downloaded string avoid issues 64-bit integers. Person ID used CohortMethod, provided reference . Adding log likelihood ratio outcome model object. Deprecating oracleTempSchema argument favor tempEmulationSchema line new SqlRender interface. Bug fixes: Still always including likelihood profile outcome model objects. Fixing issues IDs integer64.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-401","dir":"Changelog","previous_headings":"","what":"CohortMethod 4.0.1","title":"CohortMethod 4.0.1","text":"Changes: Always including likelihood profile outcome model objects. Bug fixes: Fixing “argument ‘excludeDrugsFromCovariates’ missing” error calling createGetDbCohortMethodDataArgs() without deprecated argument excludeDrugsFromCovariates. testing handling empty exposure cohorts. Fixing exclusion covariate IDs fitting propensity models. Correct covariate balance computation covariate values integers.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-400","dir":"Changelog","previous_headings":"","what":"CohortMethod 4.0.0","title":"CohortMethod 4.0.0","text":"Changes: Switching ff Andromeda storing large data objects. Bugfixes: Fixed bug IPTW.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-311","dir":"Changelog","previous_headings":"","what":"CohortMethod 3.1.1","title":"CohortMethod 3.1.1","text":"Changes: Updating documentation: adding literature reference IPTW, using new SqlRender interface vignettes. Changing default equipoise bounds 0.25-0.75 0.3-0.7 consistent Alec Walker’s original paper. Bugfixes: Fixing issues sampling fitting propensity models.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-310","dir":"Changelog","previous_headings":"","what":"CohortMethod 3.1.0","title":"CohortMethod 3.1.0","text":"Changes: Added plotTimeToEvent function Deprecating addExposureDaysToStart addExposureDaysToEnd arguments, adding new arguments called startAnchor endAnchor. hope less confusing. Fixing random seeds reproducibility. Changing default equipoise bounds 0.25-0.75 0.3-0.7 consistent Alec Walker’s original paper. Bugfixes: longer overriding ffmaxbytes ffbatchbytes .onLoad. Instead relying FeatureExtraction . Part fixing chunk.default error caused ff package R v3.6.0 machines lots memory. Correct calculation original population count using study end date.","code":""},{"path":"https://ohdsi.github.io/CohortMethod/news/index.html","id":"cohortmethod-302","dir":"Changelog","previous_headings":"","what":"CohortMethod 3.0.2","title":"CohortMethod 3.0.2","text":"Changes: (Much) faster variable ratio matching","code":""}]
